{"version":3,"file":"menu.js","sources":["pages/menu/menu.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWVudS9tZW51LnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"menu-container\">\n\t\t<!-- 搜索栏 -->\n\t\t<view class=\"search-bar\">\n\t\t\t<view class=\"search-box\" @click=\"goToSearch\">\n\t\t\t\t<image src=\"/static/icons/common/search.svg\" class=\"search-icon\"></image>\n\t\t\t\t<text class=\"search-placeholder\">搜索奶茶、果茶、小吃</text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 内容区带分类导航 -->\n\t\t<view class=\"content-with-categories\">\n\t\t\t<!-- 左侧分类导航 -->\n\t\t\t<scroll-view scroll-y class=\"category-nav\">\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"(category, index) in categories\" \n\t\t\t\t\t:key=\"category.id\" \n\t\t\t\t\t:class=\"['category-item', currentCategoryIndex === index ? 'active' : '']\"\n\t\t\t\t\t@click=\"switchCategory(index)\"\n\t\t\t\t>\n\t\t\t\t\t<text>{{category.name}}</text>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t\t\n\t\t\t<!-- 右侧商品列表 -->\n\t\t\t<scroll-view \n\t\t\t\tscroll-y \n\t\t\t\tclass=\"product-list\" \n\t\t\t\t@scrolltolower=\"loadMoreProducts\" \n\t\t\t\t:scroll-into-view=\"scrollToId\"\n\t\t\t>\n\t\t\t\t<!-- 推荐商品 -->\n\t\t\t\t<view class=\"section\" v-if=\"currentCategoryIndex === 0\">\n\t\t\t\t\t<view class=\"section-title\">\n\t\t\t\t\t\t<text>推荐商品</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"product-grid\">\n\t\t\t\t\t\t<view \n\t\t\t\t\t\t\tclass=\"product-card\" \n\t\t\t\t\t\t\tv-for=\"product in recommendProducts\" \n\t\t\t\t\t\t\t:key=\"product.id\"\n\t\t\t\t\t\t\t@click=\"showProductDetail(product)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<image :src=\"product.image || '/static/images/default-product.svg'\" class=\"product-image\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<view class=\"product-info\">\n\t\t\t\t\t\t\t\t<text class=\"product-name\">{{product.name}}</text>\n\t\t\t\t\t\t\t\t<view class=\"product-price-row\">\n\t\t\t\t\t\t\t\t\t<text class=\"product-price\">¥{{product.price.toFixed(2)}}</text>\n\t\t\t\t\t\t\t\t\t<view class=\"add-to-cart-btn\" @click.stop=\"showProductDetail(product)\">\n\t\t\t\t\t\t\t\t\t\t<image src=\"/static/icons/common/add.svg\" class=\"add-icon\"></image>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 分类商品 -->\n\t\t\t\t<view \n\t\t\t\t\tclass=\"section\" \n\t\t\t\t\tv-for=\"(category, index) in categories\" \n\t\t\t\t\t:key=\"category.id\" \n\t\t\t\t\t:id=\"'category-section-' + category.id\"\n\t\t\t\t\tv-show=\"currentCategoryIndex === 0 || currentCategoryIndex === index\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"section-title\">\n\t\t\t\t\t\t<text>{{category.name}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"product-grid\">\n\t\t\t\t\t\t<view \n\t\t\t\t\t\t\tclass=\"product-card\" \n\t\t\t\t\t\t\tv-for=\"product in categoryProducts[category.id] || []\" \n\t\t\t\t\t\t\t:key=\"product.id\"\n\t\t\t\t\t\t\t@click=\"showProductDetail(product)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<image :src=\"product.image || '/static/images/default-product.svg'\" class=\"product-image\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<view class=\"product-info\">\n\t\t\t\t\t\t\t\t<text class=\"product-name\">{{product.name}}</text>\n\t\t\t\t\t\t\t\t<view class=\"product-price-row\">\n\t\t\t\t\t\t\t\t\t<text class=\"product-price\">¥{{product.price.toFixed(2)}}</text>\n\t\t\t\t\t\t\t\t\t<view class=\"add-to-cart-btn\" @click.stop=\"showProductDetail(product)\">\n\t\t\t\t\t\t\t\t\t\t<image src=\"/static/icons/common/add.svg\" class=\"add-icon\"></image>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 加载更多状态 -->\n\t\t\t\t\t<view class=\"load-more\" v-if=\"categoryLoadingStatus[category.id] === 'loading'\">\n\t\t\t\t\t\t<view class=\"loading-spinner\"></view>\n\t\t\t\t\t\t<text>加载中...</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"load-more\" v-else-if=\"categoryLoadingStatus[category.id] === 'noMore'\">\n\t\t\t\t\t\t<text>已加载全部</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\t\t\n\t\t<!-- 商品详情弹窗 - 预先渲染但隐藏 -->\n\t\t<view class=\"product-detail-popup\" v-show=\"showDetail\">\n\t\t\t<view class=\"popup-mask\" @click=\"hideProductDetail\" :style=\"maskStyle\"></view>\n\t\t\t<view class=\"popup-content\" :style=\"popupStyle\">\n\t\t\t\t<!-- 添加内容淡入效果 -->\n\t\t\t\t<view class=\"popup-inner\" :style=\"contentStyle\">\n\t\t\t\t\t<!-- 关闭按钮 -->\n\t\t\t\t\t<view class=\"close-btn\" @click=\"hideProductDetail\">\n\t\t\t\t\t\t<image src=\"/static/icons/common/close.svg\" class=\"close-icon\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 商品基本信息 -->\n\t\t\t\t\t<view class=\"detail-header\">\n\t\t\t\t\t\t<image :src=\"currentProduct.image || '/static/images/default-product.svg'\" class=\"detail-image\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t<view class=\"detail-basic-info\">\n\t\t\t\t\t\t\t<view class=\"name-price-row\">\n\t\t\t\t\t\t\t\t<text class=\"detail-name\">{{currentProduct.name}}</text>\n\t\t\t\t\t\t\t\t<text class=\"detail-price\">¥{{currentProduct.price ? currentProduct.price.toFixed(2) : '0.00'}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"detail-sales\" v-if=\"currentProduct.sales\">销量: {{currentProduct.sales}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 规格选择 -->\n\t\t\t\t\t<view class=\"specifications\">\n\t\t\t\t\t\t<!-- 温度选择 -->\n\t\t\t\t\t\t<view class=\"spec-section\">\n\t\t\t\t\t\t\t<view class=\"spec-title-row\">\n\t\t\t\t\t\t\t\t<image src=\"/static/icons/common/temperature.svg\" class=\"spec-icon\"></image>\n\t\t\t\t\t\t\t<text class=\"spec-title\">温度</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"spec-options\">\n\t\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\t\tv-for=\"(temp, index) in temperatures\" \n\t\t\t\t\t\t\t\t\t:key=\"index\" \n\t\t\t\t\t\t\t\t\t:class=\"['spec-option', selectedTemp === temp ? 'selected' : '']\"\n\t\t\t\t\t\t\t\t\t@click=\"selectedTemp = temp\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<text>{{temp}}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 甜度选择 -->\n\t\t\t\t\t\t<view class=\"spec-section\">\n\t\t\t\t\t\t\t<view class=\"spec-title-row\">\n\t\t\t\t\t\t\t\t<image src=\"/static/icons/common/sweetness.svg\" class=\"spec-icon\"></image>\n\t\t\t\t\t\t\t<text class=\"spec-title\">甜度</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"spec-options\">\n\t\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\t\tv-for=\"(sweet, index) in sweetness\" \n\t\t\t\t\t\t\t\t\t:key=\"index\" \n\t\t\t\t\t\t\t\t\t:class=\"['spec-option', selectedSweet === sweet ? 'selected' : '']\"\n\t\t\t\t\t\t\t\t\t@click=\"selectedSweet = sweet\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<text>{{sweet}}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 配料选择 -->\n\t\t\t\t\t\t<view class=\"spec-section\" v-if=\"ingredients.length > 0\">\n\t\t\t\t\t\t\t<view class=\"spec-title-row\">\n\t\t\t\t\t\t\t\t<image src=\"/static/icons/common/ingredients.svg\" class=\"spec-icon\"></image>\n\t\t\t\t\t\t\t<text class=\"spec-title\">加料</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"ingredient-options\">\n\t\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\t\tv-for=\"ing in ingredients\" \n\t\t\t\t\t\t\t\t\t:key=\"ing.id\" \n\t\t\t\t\t\t\t\t\t:class=\"['ingredient-item', selectedIngredients.findIndex(i => i.id === ing.id) > -1 ? 'selected' : '']\"\n\t\t\t\t\t\t\t\t\t@click=\"toggleIngredient(ing)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<text class=\"ingredient-name\">{{ing.name}}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"ingredient-price\">¥{{ing.price.toFixed(2)}}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 数量调整 -->\n\t\t\t\t\t<view class=\"quantity-section\">\n\t\t\t\t\t\t<view class=\"spec-title-row\">\n\t\t\t\t\t\t\t<image src=\"/static/icons/common/quantity.svg\" class=\"spec-icon\"></image>\n\t\t\t\t\t\t<text class=\"quantity-label\">数量</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"quantity-control\">\n\t\t\t\t\t\t\t<text class=\"quantity-btn minus\" @click=\"adjustQuantity(-1)\">-</text>\n\t\t\t\t\t\t\t<input type=\"number\" class=\"quantity-input\" v-model=\"quantity\" disabled />\n\t\t\t\t\t\t\t<text class=\"quantity-btn plus\" @click=\"adjustQuantity(1)\">+</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 底部按钮 -->\n\t\t\t\t\t<view class=\"detail-footer\">\n\t\t\t\t\t\t<view class=\"total-price\">\n\t\t\t\t\t\t\t<text>总计：</text>\n\t\t\t\t\t\t\t<text class=\"price-value\">¥{{getTotalPrice().toFixed(2)}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"add-to-cart\" @click=\"addToCart\">\n\t\t\t\t\t\t\t<text>加入购物车</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport api from '@/utils/api.js';\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 分类数据\n\t\t\t\tcategories: [],\n\t\t\t\tcurrentCategoryIndex: 0,\n\t\t\t\tscrollToId: '',\n\t\t\t\t\n\t\t\t\t// 商品数据\n\t\t\t\trecommendProducts: [],\n\t\t\t\tcategoryProducts: {}, // 按分类ID存储商品列表 {categoryId: [products]}\n\t\t\t\tcategoryPages: {}, // 分页信息 {categoryId: currentPage}\n\t\t\t\tcategoryLoadingStatus: {}, // 加载状态 {categoryId: 'loading'|'noMore'|'more'}\n\t\t\t\t\n\t\t\t\t// 商品详情\n\t\t\t\tshowDetail: false,\n\t\t\t\tcurrentProduct: {},\n\t\t\t\tquantity: 1,\n\t\t\t\tpopupStyle: {\n\t\t\t\t\ttransform: 'translateY(100%)',\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t},\n\t\t\t\tmaskStyle: {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t},\n\t\t\t\tcontentStyle: {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\t// 规格选择\n\t\t\t\ttemperatures: ['常温', '热', '冰', '少冰'],\n\t\t\t\tsweetness: ['标准糖', '少糖', '半糖', '微糖', '无糖'],\n\t\t\t\tingredients: [],\n\t\t\t\tselectedTemp: '常温',\n\t\t\t\tselectedSweet: '标准糖',\n\t\t\t\tselectedIngredients: []\n\t\t\t}\n\t\t},\n\t\tonLoad(options) {\n\t\t\tthis.loadCategories();\n\t\t\tthis.loadRecommendProducts();\n\t\t\tthis.loadIngredients();\n\t\t\t// 创建动画实例\n\t\t\tthis.popupAnimation = uni.createAnimation({\n\t\t\t\tduration: 1000,\n\t\t\t\ttimingFunction: 'ease-out',\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\t\n\t\t\t// 如果有productId参数，直接加载商品详情\n\t\t\tif (options.productId) {\n\t\t\t\tthis.loadProductDetail(options.productId);\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t// 加载商品分类\n\t\t\tloadCategories() {\n\t\t\t\tapi.getCategories()\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('获取商品分类响应:', res.data);\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\t// 添加\"全部\"分类\n\t\t\t\t\t\t\tthis.categories = [\n\t\t\t\t\t\t\t\t{ id: 0, name: '全部' },\n\t\t\t\t\t\t\t\t...res.data.data\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 初始化分类商品数据结构\n\t\t\t\t\t\t\tthis.categories.forEach(category => {\n\t\t\t\t\t\t\t\tif (category.id !== 0) { // 排除\"全部\"分类\n\t\t\t\t\t\t\t\t\tthis.categoryProducts[category.id] = [];\n\t\t\t\t\t\t\t\t\tthis.categoryPages[category.id] = 0;\n\t\t\t\t\t\t\t\t\tthis.categoryLoadingStatus[category.id] = 'more';\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 预加载每个分类的商品\n\t\t\t\t\t\t\t\t\tthis.loadCategoryProducts(category.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showToast(res.data.message || '获取商品分类失败');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 加载推荐商品\n\t\t\tloadRecommendProducts() {\n\t\t\t\tapi.getRecommendProducts()\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('获取推荐商品响应:', res.data);\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\tthis.recommendProducts = res.data.data;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showToast(res.data.message || '获取推荐商品失败');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 加载配料列表\n\t\t\tloadIngredients() {\n\t\t\t\tapi.getIngredients()\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('获取配料列表响应:', res.data);\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\tthis.ingredients = res.data.data;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showToast(res.data.message || '获取配料列表失败');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 加载分类商品\n\t\t\tloadCategoryProducts(categoryId, isLoadMore = false) {\n\t\t\t\tif (this.categoryLoadingStatus[categoryId] === 'loading' || this.categoryLoadingStatus[categoryId] === 'noMore') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.categoryLoadingStatus[categoryId] = 'loading';\n\t\t\t\t\n\t\t\t\tconst page = isLoadMore ? this.categoryPages[categoryId] + 1 : this.categoryPages[categoryId];\n\t\t\t\tconst size = 10;\n\t\t\t\t\n\t\t\t\tapi.getCategoryProducts(categoryId, page, size)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log(`获取分类${categoryId}商品响应:`, res.data);\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\tconst data = res.data.data;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 合并数据\n\t\t\t\t\t\t\tif (isLoadMore) {\n\t\t\t\t\t\t\t\tthis.categoryProducts[categoryId] = [...this.categoryProducts[categoryId], ...data.content];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.categoryProducts[categoryId] = data.content;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 更新分页状态\n\t\t\t\t\t\t\tthis.categoryPages[categoryId] = page;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 判断是否还有更多数据\n\t\t\t\t\t\t\tif (data.last) {\n\t\t\t\t\t\t\t\tthis.categoryLoadingStatus[categoryId] = 'noMore';\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.categoryLoadingStatus[categoryId] = 'more';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showToast(res.data.message || '获取分类商品失败');\n\t\t\t\t\t\t\tthis.categoryLoadingStatus[categoryId] = 'more';\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t\tthis.categoryLoadingStatus[categoryId] = 'more';\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 切换分类\n\t\t\tswitchCategory(index) {\n\t\t\t\tthis.currentCategoryIndex = index;\n\t\t\t\t\n\t\t\t\t// 如果是切换到\"全部\"分类，无需滚动\n\t\t\t\tif (index === 0) return;\n\t\t\t\t\n\t\t\t\t// 滚动到对应分类\n\t\t\t\tconst categoryId = this.categories[index].id;\n\t\t\t\tthis.scrollToId = 'category-section-' + categoryId;\n\t\t\t},\n\t\t\t\n\t\t\t// 加载更多商品\n\t\t\tloadMoreProducts() {\n\t\t\t\t// 全部分类视图下，不触发加载更多\n\t\t\t\tif (this.currentCategoryIndex === 0) return;\n\t\t\t\t\n\t\t\t\t// 获取当前选中的分类ID\n\t\t\t\tconst categoryId = this.categories[this.currentCategoryIndex].id;\n\t\t\t\tthis.loadCategoryProducts(categoryId, true);\n\t\t\t},\n\t\t\t\n\t\t\t// 预加载商品详情\n\t\t\tloadProductDetail(productId) {\n\t\t\t\tapi.getProductDetail(productId)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\tthis.currentProduct = res.data.data;\n\t\t\t\t\t\t\tthis.resetProductOptions();\n\t\t\t\t\t\t\tthis.openDetailPopup();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showToast(res.data.message || '获取商品详情失败');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 显示商品详情\n\t\t\tshowProductDetail(product) {\n\t\t\t\t// 先重置选项，避免显示上一次的选择\n\t\t\t\tthis.resetProductOptions();\n\t\t\t\t\n\t\t\t\t// 先显示弹窗，但内容透明\n\t\t\t\tthis.showDetail = true;\n\t\t\t\tthis.popupStyle = {\n\t\t\t\t\ttransform: 'translateY(100%)',\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t};\n\t\t\t\tthis.maskStyle = {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t};\n\t\t\t\tthis.contentStyle = {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 强制重绘DOM\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t// 让DOM更新完成\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t// 先加载商品详情数据\n\t\t\t\t\t\tapi.getProductDetail(product.id)\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\tconsole.log('获取商品详情响应:', res.data);\n\t\t\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\t\t\t// 设置数据\n\t\t\t\t\t\t\t\t\tthis.currentProduct = res.data.data;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 打开弹窗\n\t\t\t\t\t\t\t\t\tthis.openDetailPopup();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.showToast(res.data.message || '获取商品详情失败');\n\t\t\t\t\t\t\t\t\tthis.showDetail = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t\t\t\tthis.showDetail = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}, 50);\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 打开详情弹窗（动画部分）\n\t\t\topenDetailPopup() {\n\t\t\t\t// 第一步：显示蒙层\n\t\t\t\tthis.maskStyle = {\n\t\t\t\t\topacity: 1,\n\t\t\t\t\ttransition: 'opacity 0.2s ease-out'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 第二步：滑入弹窗\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popupStyle = {\n\t\t\t\t\t\ttransform: 'translateY(0)',\n\t\t\t\t\t\ttransition: 'transform 0.3s ease-out'\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// 第三步：显示内容\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.contentStyle = {\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\ttransition: 'opacity 0.2s ease-out'\n\t\t\t\t\t\t};\n\t\t\t\t\t}, 150);\n\t\t\t\t}, 100);\n\t\t\t},\n\t\t\t\n\t\t\t// 隐藏商品详情\n\t\t\thideProductDetail() {\n\t\t\t\t// 第一步：隐藏内容\n\t\t\t\tthis.contentStyle = {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransition: 'opacity 0.2s ease-in'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 第二步：收起弹窗\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popupStyle = {\n\t\t\t\t\t\ttransform: 'translateY(100%)',\n\t\t\t\t\t\ttransition: 'transform 0.3s ease-in'\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// 第三步：隐藏蒙层\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.maskStyle = {\n\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\ttransition: 'opacity 0.2s ease-in'\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 最后完全隐藏\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.showDetail = false;\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t}, 150);\n\t\t\t\t}, 100);\n\t\t\t},\n\t\t\t\n\t\t\t// 重置商品选项\n\t\t\tresetProductOptions() {\n\t\t\t\tthis.quantity = 1;\n\t\t\t\tthis.selectedTemp = '常温';\n\t\t\t\tthis.selectedSweet = '标准糖';\n\t\t\t\tthis.selectedIngredients = [];\n\t\t\t},\n\t\t\t\n\t\t\t// 调整数量\n\t\t\tadjustQuantity(delta) {\n\t\t\t\tconst newQuantity = this.quantity + delta;\n\t\t\t\tif (newQuantity >= 1 && newQuantity <= 99) {\n\t\t\t\t\tthis.quantity = newQuantity;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 切换配料选择\n\t\t\ttoggleIngredient(ingredient) {\n\t\t\t\tconst index = this.selectedIngredients.findIndex(item => item.id === ingredient.id);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.selectedIngredients.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\t// 严格按照API文档要求的格式创建配料对象\n\t\t\t\t\tconst ingredientObj = {\n\t\t\t\t\t\tid: ingredient.id,\n\t\t\t\t\t\tname: ingredient.name,\n\t\t\t\t\t\tprice: ingredient.price\n\t\t\t\t\t};\n\t\t\t\t\tconsole.log('添加配料:', ingredientObj);\n\t\t\t\t\tthis.selectedIngredients.push(ingredientObj);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 计算总价\n\t\t\tgetTotalPrice() {\n\t\t\t\tif (!this.currentProduct.price) return 0;\n\t\t\t\t\n\t\t\t\tlet total = this.currentProduct.price * this.quantity;\n\t\t\t\t\n\t\t\t\t// 加料价格\n\t\t\t\tthis.selectedIngredients.forEach(ing => {\n\t\t\t\t\ttotal += ing.price * this.quantity;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn total;\n\t\t\t},\n\t\t\t\n\t\t\t// 添加到购物车（带规格）\n\t\t\taddToCart() {\n\t\t\t\tconst token = uni.getStorageSync('token');\n\t\t\t\t\n\t\t\t\tif (!token) {\n\t\t\t\t\t// 修改：不直接跳转到登录页，而是先弹出确认对话框\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '未登录提示',\n\t\t\t\t\t\tcontent: '您尚未登录，是否前往登录页面？',\n\t\t\t\t\t\tconfirmText: '去登录',\n\t\t\t\t\t\tcancelText: '取消',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tthis.redirectToLogin();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 处理配料数据\n\t\t\t\tlet ingredientsData = [];\n\t\t\t\tif (this.selectedIngredients && this.selectedIngredients.length > 0) {\n\t\t\t\t\t// 确保每个配料对象都有正确的字段\n\t\t\t\t\tingredientsData = this.selectedIngredients.map(item => ({\n\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\tname: item.name,\n\t\t\t\t\t\tprice: item.price\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 检查温度和甜度控制字段\n\t\t\t\tconsole.log('商品是否允许温度选择:', this.currentProduct.allowTemperature);\n\t\t\t\tconsole.log('商品是否允许甜度选择:', this.currentProduct.allowSweetness);\n\t\t\t\tconsole.log('商品可能的其他控制字段:', Object.keys(this.currentProduct).filter(key => key.startsWith('allow')));\n\t\t\t\t\n\t\t\t\t// 用户选择的温度和甜度\n\t\t\t\tconsole.log('用户选择的温度:', this.selectedTemp);\n\t\t\t\tconsole.log('用户选择的甜度:', this.selectedSweet);\n\t\t\t\t\n\t\t\t\t// 生成规格标识字符串（用于后续比较）\n\t\t\t\tconst specKey = `${this.selectedTemp}-${this.selectedSweet}-${ingredientsData.map(i => i.id).join(',')}`;\n\t\t\t\tconsole.log('规格组合标识:', specKey);\n\t\t\t\t\n\t\t\t\t// 无论商品是否允许温度和甜度选择，都发送用户选择的值\n\t\t\t\tconst cartData = {\n\t\t\t\t\tproductId: this.currentProduct.id,\n\t\t\t\t\tquantity: this.quantity,\n\t\t\t\t\ttemperature: this.selectedTemp,\n\t\t\t\t\tsweetness: this.selectedSweet,\n\t\t\t\t\tingredients: ingredientsData,\n\t\t\t\t\tforceNewItem: true, // 添加标志，表示这是新项目\n\t\t\t\t\tselected: true\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tconsole.log('当前选择的配料原始数据:', this.selectedIngredients);\n\t\t\t\tconsole.log('处理后的配料数据:', ingredientsData);\n\t\t\t\tconsole.log('发送到购物车的数据:', cartData);\n\t\t\t\tconsole.log('当前商品是否允许配料:', this.currentProduct.allowIngredients);\n\t\t\t\tconsole.log('当前商品完整信息:', this.currentProduct);\n\t\t\t\t\n\t\t\t\tapi.request({\n\t\t\t\t\turl: '/cart',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: cartData\n\t\t\t\t}).then(res => {\n\t\t\t\t\tconsole.log('添加到购物车响应:', res.data);\n\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\tthis.showToast('已添加到购物车', 'success');\n\t\t\t\t\t\tthis.hideProductDetail();\n\t\t\t\t\t} else if (res.data.code === 401) {\n\t\t\t\t\t\tthis.handleTokenExpired();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.showToast(res.data.message || '添加到购物车失败');\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 跳转到搜索页\n\t\t\tgoToSearch() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/menu/search'\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 重定向到登录页\n\t\t\tredirectToLogin() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/login/login'\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 处理Token过期\n\t\t\thandleTokenExpired() {\n\t\t\t\tuni.removeStorageSync('token');\n\t\t\t\t\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '登录已过期，请重新登录',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.redirectToLogin();\n\t\t\t\t}, 1500);\n\t\t\t},\n\t\t\t\n\t\t\t// 显示提示信息\n\t\t\tshowToast(title, icon = 'none') {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle,\n\t\t\t\t\ticon\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.menu-container {\n\t\tmin-height: 100vh;\n\t\tbackground-color: #121212;\n\t\tposition: relative;\n\t}\n\t\n\t/* 搜索栏 */\n\t.search-bar {\n\t\tpadding: 20rpx 30rpx;\n\t\tbackground-color: #1a1a1a;\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tz-index: 10;\n\t}\n\t\n\t.search-box {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbackground-color: #262626;\n\t\tborder-radius: 40rpx;\n\t\tpadding: 15rpx 30rpx;\n\t}\n\t\n\t.search-icon {\n\t\twidth: 28rpx;\n\t\theight: 28rpx;\n\t\tmargin-right: 10rpx;\n\t}\n\t\n\t.search-placeholder {\n\t\tfont-size: 28rpx;\n\t\tcolor: #888888;\n\t}\n\t\n\t/* 内容区带分类导航 */\n\t.content-with-categories {\n\t\tdisplay: flex;\n\t\theight: calc(100vh - 110rpx);\n\t}\n\t\n\t/* 左侧分类导航 */\n\t.category-nav {\n\t\twidth: 180rpx;\n\t\tbackground-color: #1a1a1a;\n\t\theight: 100%;\n\t}\n\t\n\t.category-item {\n\t\tpadding: 30rpx 20rpx;\n\t\ttext-align: center;\n\t\tfont-size: 28rpx;\n\t\tcolor: #dddddd;\n\t\tposition: relative;\n\t}\n\t\n\t.category-item.active {\n\t\tbackground-color: #121212;\n\t\tcolor: #7b68ee;\n\t\tfont-weight: bold;\n\t}\n\t\n\t.category-item.active::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\twidth: 6rpx;\n\t\theight: 30rpx;\n\t\tbackground-color: #7b68ee;\n\t\tborder-radius: 3rpx;\n\t}\n\t\n\t/* 右侧商品列表 */\n\t.product-list {\n\t\tflex: 1;\n\t\tpadding: 20rpx;\n\t\theight: 100%;\n\t}\n\t\n\t/* 分类标题 */\n\t.section {\n\t\tmargin-bottom: 30rpx;\n\t}\n\t\n\t.section-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #ffffff;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding-left: 10rpx;\n\t\tposition: relative;\n\t}\n\t\n\t.section-title::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\twidth: 4rpx;\n\t\theight: 30rpx;\n\t\tbackground-color: #7b68ee;\n\t\tborder-radius: 2rpx;\n\t}\n\t\n\t/* 商品卡片网格 */\n\t.product-grid {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: space-between;\n\t}\n\t\n\t.product-card {\n\t\twidth: 48%;\n\t\tbackground-color: #1a1a1a;\n\t\tborder-radius: 16rpx;\n\t\tmargin-bottom: 20rpx;\n\t\toverflow: hidden;\n\t}\n\t\n\t.product-image {\n\t\twidth: 100%;\n\t\theight: 220rpx;\n\t\tbackground-color: #262626;\n\t}\n\t\n\t.product-info {\n\t\tpadding: 20rpx;\n\t}\n\t\n\t.product-name {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t\tmargin-bottom: 10rpx;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t\n\t.product-price-row {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\t\n\t.product-price {\n\t\tfont-size: 30rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t.add-to-cart-btn {\n\t\twidth: 50rpx;\n\t\theight: 50rpx;\n\t\tbackground-color: #7b68ee;\n\t\tborder-radius: 50%;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t\n\t.icon-add {\n\t\tcolor: #ffffff;\n\t\tfont-size: 28rpx;\n\t\tfont-weight: bold;\n\t}\n\t\n\t/* 加载状态 */\n\t.load-more {\n\t\ttext-align: center;\n\t\tpadding: 20rpx 0;\n\t}\n\t\n\t.loading-spinner {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tborder: 3rpx solid #7b68ee;\n\t\tborder-top-color: transparent;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 0.8s linear infinite;\n\t\tdisplay: inline-block;\n\t\tvertical-align: middle;\n\t\tmargin-right: 10rpx;\n\t}\n\t\n\t@keyframes spin {\n\t\t0% { transform: rotate(0deg); }\n\t\t100% { transform: rotate(360deg); }\n\t}\n\t\n\t.load-more text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #888888;\n\t\tvertical-align: middle;\n\t}\n\t\n\t/* 商品详情弹窗 */\n\t.product-detail-popup {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tz-index: 1000;\n\t\t/* 提前创建层叠上下文 */\n\t\ttransform: translateZ(0);\n\t\tpointer-events: auto;\n\t}\n\t\n\t.popup-mask {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground-color: rgba(0, 0, 0, 0.7);\n\t\twill-change: opacity;\n\t\t-webkit-backface-visibility: hidden;\n\t\tbackface-visibility: hidden;\n\t}\n\t\n\t.popup-content {\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\tbackground-color: #1a1a1a;\n\t\tborder-radius: 30rpx 30rpx 0 0;\n\t\toverflow: hidden;\n\t\tbox-sizing: border-box;\n\t\t/* 使用transform提高性能 */\n\t\ttransform: translateY(100%);\n\t\twill-change: transform;\n\t\t-webkit-backface-visibility: hidden;\n\t\tbackface-visibility: hidden;\n\t\t/* 设置最大高度 */\n\t\tmax-height: 85vh;\n\t\toverflow-y: auto;\n\t}\n\t\n\t/* 新增：内容容器 */\n\t.popup-inner {\n\t\twidth: 100%;\n\t\twill-change: opacity;\n\t\t-webkit-backface-visibility: hidden;\n\t\tbackface-visibility: hidden;\n\t}\n\t\n\t.close-btn {\n\t\tposition: absolute;\n\t\ttop: 20rpx;\n\t\tright: 20rpx;\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tz-index: 10;\n\t}\n\t\n\t.close-icon {\n\t\twidth: 30rpx;\n\t\theight: 30rpx;\n\t}\n\t\n\t/* 商品详情内容 */\n\t.detail-content {\n\t\tpadding: 30rpx;\n\t}\n\t\n\t.detail-header {\n\t\tposition: relative;\n\t}\n\t\n\t.detail-image {\n\t\twidth: 100%;\n\t\theight: 400rpx;\n\t\tbackground-color: #262626;\n\t}\n\t\n\t.detail-basic-info {\n\t\tpadding: 30rpx;\n\t}\n\t\n\t.name-price-row {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 10rpx;\n\t}\n\t\n\t.detail-name {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #ffffff;\n\t\tflex: 1;\n\t\tmargin-right: 20rpx;\n\t}\n\t\n\t.detail-price {\n\t\tfont-size: 36rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t.detail-sales {\n\t\tfont-size: 24rpx;\n\t\tcolor: #888888;\n\t}\n\t\n\t/* 规格选择区域 */\n\t.specifications {\n\t\tpadding: 0 30rpx;\n\t}\n\t\n\t.spec-section {\n\t\tmargin-bottom: 30rpx;\n\t}\n\t\n\t.spec-title-row {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-bottom: 15rpx;\n\t}\n\t\n\t.spec-icon {\n\t\twidth: 36rpx;\n\t\theight: 36rpx;\n\t\tmargin-right: 10rpx;\n\t}\n\t\n\t.spec-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: #aaaaaa;\n\t}\n\t\n\t.spec-options {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t}\n\t\n\t.spec-option {\n\t\tmin-width: 120rpx;\n\t\theight: 60rpx;\n\t\tbackground-color: #262626;\n\t\tborder-radius: 30rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmargin-right: 20rpx;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 0 20rpx;\n\t}\n\t\n\t.spec-option text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.spec-option.selected {\n\t\tbackground-color: rgba(123, 104, 238, 0.2);\n\t\tborder: 1rpx solid #7b68ee;\n\t}\n\t\n\t.spec-option.selected text {\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t/* 配料选择 */\n\t.ingredient-options {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: flex-start;\n\t\twidth: 100%;\n\t}\n\t\n\t.ingredient-item {\n\t\twidth: 30%;\n\t\tmin-width: 120rpx;\n\t\theight: auto;\n\t\tbackground-color: #262626;\n\t\tborder-radius: 10rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmargin-right: 10rpx;\n\t\tmargin-bottom: 15rpx;\n\t\tpadding: 12rpx 10rpx;\n\t\tbox-sizing: border-box;\n\t\tborder: 1rpx solid transparent;\n\t}\n\t\n\t.ingredient-item:nth-child(3n) {\n\t\tmargin-right: 0;\n\t}\n\t\n\t.ingredient-item.selected {\n\t\tbackground-color: rgba(123, 104, 238, 0.2);\n\t\tborder: 1rpx solid #7b68ee;\n\t}\n\t\n\t.ingredient-name {\n\t\tfont-size: 24rpx;\n\t\tcolor: #ffffff;\n\t\tmargin-bottom: 4rpx;\n\t\ttext-align: center;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tmax-width: 100%;\n\t}\n\t\n\t.ingredient-price {\n\t\tfont-size: 22rpx;\n\t\tcolor: #7b68ee;\n\t\ttext-align: center;\n\t}\n\t\n\t/* 数量调整 */\n\t.quantity-section {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 30rpx;\n\t\tborder-bottom: 1rpx solid #262626;\n\t}\n\t\n\t.quantity-label {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.quantity-control {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t\n\t.quantity-btn {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tbackground-color: #262626;\n\t\tborder-radius: 30rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tfont-size: 30rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.quantity-input {\n\t\twidth: 80rpx;\n\t\ttext-align: center;\n\t\tmargin: 0 20rpx;\n\t\tbackground-color: transparent;\n\t\tcolor: #ffffff;\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t/* 底部操作区 */\n\t.detail-footer {\n\t\tdisplay: flex;\n\t\tpadding: 30rpx;\n\t\talign-items: center;\n\t}\n\t\n\t.total-price {\n\t\tflex: 1;\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.price-value {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t.add-to-cart {\n\t\tmin-width: 240rpx;\n\t\theight: 80rpx;\n\t\tbackground-color: #7b68ee;\n\t\tborder-radius: 40rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t\n\t.add-to-cart text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.add-icon {\n\t\twidth: 30rpx;\n\t\theight: 30rpx;\n\t}\n</style> ","import MiniProgramPage from 'C:/Users/LXD/Desktop/奶茶点单系统/milktea-uniapp/pages/menu/menu.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","api"],"mappings":"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"}