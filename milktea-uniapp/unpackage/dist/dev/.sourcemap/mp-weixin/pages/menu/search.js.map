{"version":3,"file":"search.js","sources":["pages/menu/search.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWVudS9zZWFyY2gudnVl"],"sourcesContent":["<template>\n\t<view class=\"search-container\">\n\t\t<!-- 顶部标题栏 -->\n\t\t<view class=\"navbar\">\n\t\t\t<text class=\"page-title\">搜索</text>\n\t\t</view>\n\t\t\n\t\t<!-- 搜索栏 -->\n\t\t<view class=\"search-header\">\n\t\t\t<view class=\"search-box\">\n\t\t\t\t<image src=\"/static/icons/common/search.svg\" class=\"search-icon\"></image>\n\t\t\t\t<input \n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tclass=\"search-input\" \n\t\t\t\t\tplaceholder=\"搜索奶茶、果茶、小吃\" \n\t\t\t\t\tplaceholder-style=\"color: #888888;\"\n\t\t\t\t\tv-model=\"keyword\"\n\t\t\t\t\t@input=\"onKeywordInput\"\n\t\t\t\t\tfocus\n\t\t\t\t/>\n\t\t\t\t<view class=\"clear-icon\" @click=\"clearKeyword\" v-if=\"keyword\">\n\t\t\t\t\t<image src=\"/static/icons/common/close.svg\" class=\"close-icon-small\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<text class=\"cancel-btn\" @click=\"goBack\">取消</text>\n\t\t</view>\n\t\t\n\t\t<!-- 搜索历史 -->\n\t\t<view class=\"search-history\" v-if=\"!keyword && searchHistory.length > 0 && !searching\">\n\t\t\t<view class=\"section-header\">\n\t\t\t\t<text class=\"section-title\">搜索历史</text>\n\t\t\t\t<text class=\"clear-btn\" @click=\"clearHistory\">清空</text>\n\t\t\t</view>\n\t\t\t<view class=\"history-tags\">\n\t\t\t\t<view \n\t\t\t\t\tclass=\"history-tag\" \n\t\t\t\t\tv-for=\"(item, index) in searchHistory\" \n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t@click=\"useHistoryKeyword(item)\"\n\t\t\t\t>\n\t\t\t\t\t<text>{{item}}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 搜索中 -->\n\t\t<view class=\"loading-box\" v-if=\"loading\">\n\t\t\t<view class=\"loading-spinner\"></view>\n\t\t\t<text class=\"loading-text\">搜索中...</text>\n\t\t</view>\n\t\t\n\t\t<!-- 搜索结果 -->\n\t\t<scroll-view \n\t\t\tscroll-y \n\t\t\tclass=\"search-results\" \n\t\t\tv-if=\"!loading && searchResults.length > 0\"\n\t\t\t@scrolltolower=\"loadMoreResults\"\n\t\t>\n\t\t\t<view \n\t\t\t\tclass=\"product-item\" \n\t\t\t\tv-for=\"product in searchResults\" \n\t\t\t\t:key=\"product.id\"\n\t\t\t\t@click=\"showProductDetail(product)\"\n\t\t\t>\n\t\t\t\t<image :src=\"product.image || '/static/default-product.png'\" class=\"product-image\" mode=\"aspectFill\"></image>\n\t\t\t\t<view class=\"product-info\">\n\t\t\t\t\t<view class=\"product-name\">{{product.name}}</view>\n\t\t\t\t\t<view class=\"product-description\" v-if=\"product.description\">{{product.description}}</view>\n\t\t\t\t\t<view class=\"product-bottom\">\n\t\t\t\t\t\t<text class=\"product-price\">¥{{product.price.toFixed(2)}}</text>\n\t\t\t\t\t\t<view class=\"add-to-cart-btn\" @click.stop=\"showProductDetail(product)\">\n\t\t\t\t\t\t\t<image src=\"/static/icons/common/add.svg\" class=\"add-icon\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 加载状态 -->\n\t\t\t<view class=\"load-more\" v-if=\"hasMore && !loadingMore\">\n\t\t\t\t<text>上拉加载更多</text>\n\t\t\t</view>\n\t\t\t<view class=\"load-more\" v-else-if=\"!hasMore\">\n\t\t\t\t<text>已加载全部</text>\n\t\t\t</view>\n\t\t\t<view class=\"loading-more\" v-if=\"loadingMore\">\n\t\t\t\t<view class=\"loading-spinner\"></view>\n\t\t\t\t<text>加载中...</text>\n\t\t\t</view>\n\t\t</scroll-view>\n\t\t\n\t\t<!-- 搜索无结果 -->\n\t\t<view class=\"no-results\" v-if=\"hasSearched && searchResults.length === 0\">\n\t\t\t<image src=\"/static/tabbar/menu.png\" class=\"empty-icon\"></image>\n\t\t\t<text class=\"no-results-text\">没有找到相关商品</text>\n\t\t</view>\n\t\t\n\t\t<!-- 商品详情弹窗 -->\n\t\t<view class=\"product-detail-popup\" v-show=\"showDetail\">\n\t\t\t<view class=\"popup-mask\" @click=\"hideProductDetail\" :style=\"maskStyle\"></view>\n\t\t\t<view class=\"popup-content\" :style=\"popupStyle\">\n\t\t\t\t<!-- 添加内容淡入效果 -->\n\t\t\t\t<view class=\"popup-inner\" :style=\"contentStyle\">\n\t\t\t\t\t<!-- 关闭按钮 -->\n\t\t\t\t\t<view class=\"close-btn\" @click=\"hideProductDetail\">\n\t\t\t\t\t\t<image src=\"/static/icons/common/close.svg\" class=\"close-icon\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 商品基本信息 -->\n\t\t\t\t\t<view class=\"detail-header\">\n\t\t\t\t\t\t<image :src=\"currentProduct.image || '/static/images/default-product.svg'\" class=\"detail-image\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t<view class=\"detail-basic-info\">\n\t\t\t\t\t\t\t<view class=\"name-price-row\">\n\t\t\t\t\t\t\t\t<text class=\"detail-name\">{{currentProduct.name}}</text>\n\t\t\t\t\t\t\t\t<text class=\"detail-price\">¥{{currentProduct.price ? currentProduct.price.toFixed(2) : '0.00'}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"detail-sales\" v-if=\"currentProduct.sales\">销量: {{currentProduct.sales}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 规格选择 -->\n\t\t\t\t\t<view class=\"specifications\">\n\t\t\t\t\t\t<!-- 温度选择 -->\n\t\t\t\t\t\t<view class=\"spec-section\">\n\t\t\t\t\t\t\t<view class=\"spec-title-row\">\n\t\t\t\t\t\t\t\t<image src=\"/static/icons/common/temperature.svg\" class=\"spec-icon\"></image>\n\t\t\t\t\t\t\t\t<text class=\"spec-title\">温度</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"spec-options\">\n\t\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\t\tv-for=\"(temp, index) in temperatures\" \n\t\t\t\t\t\t\t\t\t:key=\"index\" \n\t\t\t\t\t\t\t\t\t:class=\"['spec-option', selectedTemp === temp ? 'selected' : '']\"\n\t\t\t\t\t\t\t\t\t@click=\"selectedTemp = temp\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<text>{{temp}}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 甜度选择 -->\n\t\t\t\t\t\t<view class=\"spec-section\">\n\t\t\t\t\t\t\t<view class=\"spec-title-row\">\n\t\t\t\t\t\t\t\t<image src=\"/static/icons/common/sweetness.svg\" class=\"spec-icon\"></image>\n\t\t\t\t\t\t\t\t<text class=\"spec-title\">甜度</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"spec-options\">\n\t\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\t\tv-for=\"(sweet, index) in sweetness\" \n\t\t\t\t\t\t\t\t\t:key=\"index\" \n\t\t\t\t\t\t\t\t\t:class=\"['spec-option', selectedSweet === sweet ? 'selected' : '']\"\n\t\t\t\t\t\t\t\t\t@click=\"selectedSweet = sweet\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<text>{{sweet}}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 配料选择 -->\n\t\t\t\t\t\t<view class=\"spec-section\" v-if=\"ingredients.length > 0\">\n\t\t\t\t\t\t\t<view class=\"spec-title-row\">\n\t\t\t\t\t\t\t\t<image src=\"/static/icons/common/ingredients.svg\" class=\"spec-icon\"></image>\n\t\t\t\t\t\t\t\t<text class=\"spec-title\">加料</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"ingredient-options\">\n\t\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\t\tv-for=\"ing in ingredients\" \n\t\t\t\t\t\t\t\t\t:key=\"ing.id\" \n\t\t\t\t\t\t\t\t\t:class=\"['ingredient-item', selectedIngredients.findIndex(i => i.id === ing.id) > -1 ? 'selected' : '']\"\n\t\t\t\t\t\t\t\t\t@click=\"toggleIngredient(ing)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<text class=\"ingredient-name\">{{ing.name}}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"ingredient-price\">¥{{ing.price.toFixed(2)}}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 数量调整 -->\n\t\t\t\t\t<view class=\"quantity-section\">\n\t\t\t\t\t\t<view class=\"spec-title-row\">\n\t\t\t\t\t\t\t<image src=\"/static/icons/common/quantity.svg\" class=\"spec-icon\"></image>\n\t\t\t\t\t\t\t<text class=\"quantity-label\">数量</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"quantity-control\">\n\t\t\t\t\t\t\t<text class=\"quantity-btn minus\" @click=\"adjustQuantity(-1)\">-</text>\n\t\t\t\t\t\t\t<input type=\"number\" class=\"quantity-input\" v-model=\"quantity\" disabled />\n\t\t\t\t\t\t\t<text class=\"quantity-btn plus\" @click=\"adjustQuantity(1)\">+</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 底部按钮 -->\n\t\t\t\t\t<view class=\"detail-footer\">\n\t\t\t\t\t\t<view class=\"total-price\">\n\t\t\t\t\t\t\t<text>总计：</text>\n\t\t\t\t\t\t\t<text class=\"price-value\">¥{{getTotalPrice().toFixed(2)}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"add-to-cart\" @click=\"addToCart\">\n\t\t\t\t\t\t\t<text>加入购物车</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport api from '@/utils/api.js';\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tkeyword: '',\n\t\t\t\tsearchHistory: [],\n\t\t\t\tsearching: false,\n\t\t\t\tloading: false,\n\t\t\t\tloadingMore: false,\n\t\t\t\tsearchResults: [],\n\t\t\t\tpage: 0,\n\t\t\t\tsize: 10,\n\t\t\t\thasMore: true,\n\t\t\t\tsearchTimer: null, // 用于防抖处理的计时器\n\t\t\t\thasSearched: false, // 添加标记表示是否已进行过搜索\n\t\t\t\t\n\t\t\t\t// 商品详情\n\t\t\t\tshowDetail: false,\n\t\t\t\tcurrentProduct: {},\n\t\t\t\tquantity: 1,\n\t\t\t\tpopupStyle: {\n\t\t\t\t\ttransform: 'translateY(100%)',\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t},\n\t\t\t\tmaskStyle: {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t},\n\t\t\t\tcontentStyle: {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\t// 规格选择\n\t\t\t\ttemperatures: ['常温', '热', '冰', '少冰'],\n\t\t\t\tsweetness: ['标准糖', '少糖', '半糖', '微糖', '无糖'],\n\t\t\t\tingredients: [],\n\t\t\t\tselectedTemp: '常温',\n\t\t\t\tselectedSweet: '标准糖',\n\t\t\t\tselectedIngredients: []\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\t// 加载搜索历史\n\t\t\tthis.loadSearchHistory();\n\t\t\t// 加载配料\n\t\t\tthis.loadIngredients();\n\t\t},\n\t\tmethods: {\n\t\t\t// 加载配料列表\n\t\t\tloadIngredients() {\n\t\t\t\tapi.getIngredients()\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('获取配料列表响应:', res.data);\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\tthis.ingredients = res.data.data;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showToast(res.data.message || '获取配料列表失败');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 处理关键词输入（添加防抖）\n\t\t\tonKeywordInput() {\n\t\t\t\t// 设置搜索中状态\n\t\t\t\tthis.searching = true;\n\t\t\t\t\n\t\t\t\t// 清除之前的计时器\n\t\t\t\tif (this.searchTimer) {\n\t\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 如果关键词为空，清空结果并退出\n\t\t\t\tif (!this.keyword.trim()) {\n\t\t\t\t\tthis.searchResults = [];\n\t\t\t\t\tthis.searching = this.keyword ? true : false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 设置300ms的延迟，避免频繁请求\n\t\t\t\tthis.searchTimer = setTimeout(() => {\n\t\t\t\t\tthis.searchProducts();\n\t\t\t\t}, 300);\n\t\t\t},\n\t\t\t\n\t\t\t// 搜索产品（修复API调用）\n\t\t\tsearchProducts() {\n\t\t\t\t// 标记已经进行过搜索\n\t\t\t\tthis.hasSearched = true;\n\t\t\t\t\n\t\t\t\t// 保存关键词到历史\n\t\t\t\tif (this.keyword.trim()) {\n\t\t\t\t\tthis.saveKeywordToHistory(this.keyword);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 重置分页\n\t\t\t\tthis.page = 0;\n\t\t\t\tthis.hasMore = true;\n\t\t\t\t\n\t\t\t\t// 显示加载状态\n\t\t\t\tthis.loading = true;\n\t\t\t\t\n\t\t\t\t// 发送搜索请求，使用api模块\n\t\t\t\tapi.request({\n\t\t\t\t\turl: '/product/search',\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tkeyword: this.keyword,\n\t\t\t\t\t\tpage: this.page,\n\t\t\t\t\t\tsize: this.size\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tconsole.log('搜索产品响应:', res.data);\n\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\tthis.searchResults = res.data.data.content || [];\n\t\t\t\t\t\t// 判断是否有更多结果\n\t\t\t\t\t\tthis.hasMore = this.searchResults.length >= this.size;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.searchResults = [];\n\t\t\t\t\t\tthis.showToast(res.data.message || '搜索失败');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\tthis.searchResults = [];\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 保存关键词到历史（新方法，从saveSearchHistory中抽取部分逻辑）\n\t\t\tsaveKeywordToHistory(keyword) {\n\t\t\t\t// 如果历史中已有该关键词，先移除\n\t\t\t\tconst index = this.searchHistory.indexOf(keyword);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.searchHistory.splice(index, 1);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 将新关键词添加到历史列表开头\n\t\t\t\tthis.searchHistory.unshift(keyword);\n\t\t\t\t\n\t\t\t\t// 限制历史记录数量为10条\n\t\t\t\tif (this.searchHistory.length > 10) {\n\t\t\t\t\tthis.searchHistory.pop();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 保存到本地存储\n\t\t\t\tthis.saveSearchHistory();\n\t\t\t},\n\t\t\t\n\t\t\t// 加载更多搜索结果（修复API调用）\n\t\t\tloadMoreResults() {\n\t\t\t\tif (!this.hasMore || this.loadingMore || this.loading) return;\n\t\t\t\t\n\t\t\t\tthis.loadingMore = true;\n\t\t\t\tthis.page++;\n\t\t\t\t\n\t\t\t\tapi.request({\n\t\t\t\t\turl: '/product/search',\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tkeyword: this.keyword,\n\t\t\t\t\t\tpage: this.page,\n\t\t\t\t\t\tsize: this.size\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tconsole.log('加载更多搜索结果:', res.data);\n\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\tconst newResults = res.data.data.content || [];\n\t\t\t\t\t\t// 合并数据\n\t\t\t\t\t\tthis.searchResults = [...this.searchResults, ...newResults];\n\t\t\t\t\t\t// 判断是否还有更多数据\n\t\t\t\t\t\tthis.hasMore = newResults.length >= this.size;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.showToast(res.data.message || '加载更多失败');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.loadingMore = false;\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 清空搜索关键词\n\t\t\tclearKeyword() {\n\t\t\t\tthis.keyword = '';\n\t\t\t\tthis.searchResults = [];\n\t\t\t\tthis.searching = false;\n\t\t\t\t// 清除防抖计时器\n\t\t\t\tif (this.searchTimer) {\n\t\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 使用历史搜索词\n\t\t\tuseHistoryKeyword(keyword) {\n\t\t\t\tthis.keyword = keyword;\n\t\t\t\tthis.searchProducts();\n\t\t\t},\n\t\t\t\n\t\t\t// 加载搜索历史\n\t\t\tloadSearchHistory() {\n\t\t\t\tconst history = uni.getStorageSync('searchHistory');\n\t\t\t\tif (history) {\n\t\t\t\t\tthis.searchHistory = JSON.parse(history);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 保存搜索历史\n\t\t\tsaveSearchHistory() {\n\t\t\t\tuni.setStorageSync('searchHistory', JSON.stringify(this.searchHistory));\n\t\t\t},\n\t\t\t\n\t\t\t// 清空搜索历史\n\t\t\tclearHistory() {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要清空搜索历史吗？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tthis.searchHistory = [];\n\t\t\t\t\t\t\tuni.removeStorageSync('searchHistory');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 打开商品详情（修复API调用）\n\t\t\tshowProductDetail(product) {\n\t\t\t\t// 先重置选项，避免显示上一次的选择\n\t\t\t\tthis.resetProductOptions();\n\t\t\t\t\n\t\t\t\t// 先显示弹窗，但内容透明\n\t\t\t\tthis.showDetail = true;\n\t\t\t\tthis.popupStyle = {\n\t\t\t\t\ttransform: 'translateY(100%)',\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t};\n\t\t\t\tthis.maskStyle = {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t};\n\t\t\t\tthis.contentStyle = {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransition: 'none'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 强制重绘DOM\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t// 让DOM更新完成\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t// 获取商品详情\n\t\t\t\t\t\tapi.request({\n\t\t\t\t\t\t\turl: `/product/detail/${product.id}`,\n\t\t\t\t\t\t\tmethod: 'GET'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\tconsole.log('获取商品详情响应:', res.data);\n\t\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\t\tthis.currentProduct = res.data.data;\n\t\t\t\t\t\t\t\tthis.openDetailPopup();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.showToast(res.data.message || '获取商品详情失败');\n\t\t\t\t\t\t\t\tthis.showDetail = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t\t\tthis.showDetail = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 50);\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 打开详情弹窗（动画部分）\n\t\t\topenDetailPopup() {\n\t\t\t\t// 第一步：显示蒙层\n\t\t\t\tthis.maskStyle = {\n\t\t\t\t\topacity: 1,\n\t\t\t\t\ttransition: 'opacity 0.2s ease-out'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 第二步：滑入弹窗\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popupStyle = {\n\t\t\t\t\t\ttransform: 'translateY(0)',\n\t\t\t\t\t\ttransition: 'transform 0.3s ease-out'\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// 第三步：显示内容\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.contentStyle = {\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\ttransition: 'opacity 0.2s ease-out'\n\t\t\t\t\t\t};\n\t\t\t\t\t}, 150);\n\t\t\t\t}, 100);\n\t\t\t},\n\t\t\t\n\t\t\t// 重置商品选项\n\t\t\tresetProductOptions() {\n\t\t\t\tthis.quantity = 1;\n\t\t\t\tthis.selectedTemp = '常温';\n\t\t\t\tthis.selectedSweet = '标准糖';\n\t\t\t\tthis.selectedIngredients = [];\n\t\t\t},\n\t\t\t\n\t\t\t// 关闭商品详情\n\t\t\thideProductDetail() {\n\t\t\t\t// 第一步：隐藏内容\n\t\t\t\tthis.contentStyle = {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransition: 'opacity 0.2s ease-in'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 第二步：收起弹窗\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popupStyle = {\n\t\t\t\t\t\ttransform: 'translateY(100%)',\n\t\t\t\t\t\ttransition: 'transform 0.3s ease-in'\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// 第三步：隐藏蒙层\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.maskStyle = {\n\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\ttransition: 'opacity 0.2s ease-in'\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 最后完全隐藏\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.showDetail = false;\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t}, 150);\n\t\t\t\t}, 100);\n\t\t\t},\n\t\t\t\n\t\t\t// 调整数量\n\t\t\tadjustQuantity(delta) {\n\t\t\t\tconst newQuantity = this.quantity + delta;\n\t\t\t\tif (newQuantity >= 1 && newQuantity <= 99) {\n\t\t\t\t\tthis.quantity = newQuantity;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 切换配料选择\n\t\t\ttoggleIngredient(ingredient) {\n\t\t\t\tconst index = this.selectedIngredients.findIndex(item => item.id === ingredient.id);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.selectedIngredients.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\t// 严格按照API文档要求的格式创建配料对象\n\t\t\t\t\tconst ingredientObj = {\n\t\t\t\t\t\tid: ingredient.id,\n\t\t\t\t\t\tname: ingredient.name,\n\t\t\t\t\t\tprice: ingredient.price\n\t\t\t\t\t};\n\t\t\t\t\tconsole.log('添加配料:', ingredientObj);\n\t\t\t\t\tthis.selectedIngredients.push(ingredientObj);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 计算总价\n\t\t\tgetTotalPrice() {\n\t\t\t\tif (!this.currentProduct.price) return 0;\n\t\t\t\t\n\t\t\t\tlet total = this.currentProduct.price * this.quantity;\n\t\t\t\t\n\t\t\t\t// 加料价格\n\t\t\t\tthis.selectedIngredients.forEach(ing => {\n\t\t\t\t\ttotal += ing.price * this.quantity;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn total;\n\t\t\t},\n\t\t\t\n\t\t\t// 添加到购物车（修复API调用）\n\t\t\taddToCart() {\n\t\t\t\tconst token = uni.getStorageSync('token');\n\t\t\t\t\n\t\t\t\tif (!token) {\n\t\t\t\t\t// 修改：不直接跳转到登录页，而是先弹出确认对话框\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '未登录提示',\n\t\t\t\t\t\tcontent: '您尚未登录，是否前往登录页面？',\n\t\t\t\t\t\tconfirmText: '去登录',\n\t\t\t\t\t\tcancelText: '取消',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tthis.redirectToLogin();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 处理配料数据\n\t\t\t\tlet ingredientsData = [];\n\t\t\t\tif (this.selectedIngredients && this.selectedIngredients.length > 0) {\n\t\t\t\t\t// 确保每个配料对象都有正确的字段\n\t\t\t\t\tingredientsData = this.selectedIngredients.map(item => ({\n\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\tname: item.name,\n\t\t\t\t\t\tprice: item.price\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 无论商品是否允许温度和甜度选择，都发送用户选择的值\n\t\t\t\tconst cartData = {\n\t\t\t\t\tproductId: this.currentProduct.id,\n\t\t\t\t\tquantity: this.quantity,\n\t\t\t\t\ttemperature: this.selectedTemp,\n\t\t\t\t\tsweetness: this.selectedSweet,\n\t\t\t\t\tingredients: ingredientsData,\n\t\t\t\t\tforceNewItem: true, // 添加标志，表示这是新项目\n\t\t\t\t\tselected: true\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tapi.request({\n\t\t\t\t\turl: '/cart',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: cartData\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tconsole.log('添加到购物车响应:', res.data);\n\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\tthis.showToast('已添加到购物车', 'success');\n\t\t\t\t\t\tthis.hideProductDetail();\n\t\t\t\t\t} else if (res.data.code === 401) {\n\t\t\t\t\t\tthis.handleTokenExpired();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.showToast(res.data.message || '添加到购物车失败');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 返回上一页\n\t\t\tgoBack() {\n\t\t\t\tuni.navigateBack();\n\t\t\t},\n\t\t\t\n\t\t\t// 重定向到登录页\n\t\t\tredirectToLogin() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/login/login'\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 处理Token过期\n\t\t\thandleTokenExpired() {\n\t\t\t\tuni.removeStorageSync('token');\n\t\t\t\t\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '登录已过期，请重新登录',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.redirectToLogin();\n\t\t\t\t}, 1500);\n\t\t\t},\n\t\t\t\n\t\t\t// 显示提示信息\n\t\t\tshowToast(title, icon = 'none') {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle,\n\t\t\t\t\ticon\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.search-container {\n\t\tmin-height: 100vh;\n\t\tbackground-color: #121212;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\t\n\t/* 顶部标题栏 */\n\t.navbar {\n\t\tpadding-top: var(--status-bar-height);\n\t\theight: calc(44px + var(--status-bar-height));\n\t\tbackground-color: #1a1a1a;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tposition: relative;\n\t\tz-index: 100;\n\t}\n\t\n\t.page-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t\tfont-weight: bold;\n\t}\n\t\n\t/* 搜索栏 */\n\t.search-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 20rpx 30rpx;\n\t\tbackground-color: #1a1a1a;\n\t}\n\t\n\t.search-box {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbackground-color: #262626;\n\t\tborder-radius: 40rpx;\n\t\tpadding: 10rpx 20rpx;\n\t\tposition: relative;\n\t}\n\t\n\t.search-icon {\n\t\twidth: 28rpx;\n\t\theight: 28rpx;\n\t\tmargin: 0 10rpx;\n\t}\n\t\n\t.search-input {\n\t\tflex: 1;\n\t\theight: 60rpx;\n\t\tcolor: #ffffff;\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t.clear-icon {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t\n\t.close-icon-small {\n\t\twidth: 24rpx;\n\t\theight: 24rpx;\n\t}\n\t\n\t.cancel-btn {\n\t\tpadding: 0 20rpx;\n\t\tcolor: #7b68ee;\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t/* 搜索历史 */\n\t.search-history {\n\t\tpadding: 30rpx;\n\t}\n\t\n\t.section-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.section-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t\tfont-weight: bold;\n\t}\n\t\n\t.clear-btn {\n\t\tfont-size: 24rpx;\n\t\tcolor: #888888;\n\t}\n\t\n\t.history-tags {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t}\n\t\n\t.history-tag {\n\t\tpadding: 10rpx 30rpx;\n\t\tbackground-color: #262626;\n\t\tborder-radius: 30rpx;\n\t\tmargin-right: 20rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.history-tag text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #dddddd;\n\t}\n\t\n\t/* 搜索中 */\n\t.loading-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\theight: 200rpx;\n\t}\n\t\n\t.loading-spinner {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tborder: 4rpx solid #7b68ee;\n\t\tborder-top-color: transparent;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 0.8s linear infinite;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t@keyframes spin {\n\t\t0% { transform: rotate(0deg); }\n\t\t100% { transform: rotate(360deg); }\n\t}\n\t\n\t.loading-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #888888;\n\t}\n\t\n\t/* 搜索结果 */\n\t.search-results {\n\t\theight: calc(100vh - 110rpx);\n\t\tpadding: 20rpx;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.product-item {\n\t\tdisplay: flex;\n\t\tpadding: 30rpx;\n\t\tbackground-color: #1a1a1a;\n\t\tborder-radius: 16rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.product-image {\n\t\twidth: 160rpx;\n\t\theight: 160rpx;\n\t\tborder-radius: 10rpx;\n\t\tmargin-right: 20rpx;\n\t\tbackground-color: #262626;\n\t}\n\t\n\t.product-info {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t}\n\t\n\t.product-name {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t\tmargin-bottom: 10rpx;\n\t\tfont-weight: bold;\n\t}\n\t\n\t.product-description {\n\t\tfont-size: 24rpx;\n\t\tcolor: #888888;\n\t\tmargin-bottom: 10rpx;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tdisplay: -webkit-box;\n\t\t-webkit-line-clamp: 2;\n\t\t-webkit-box-orient: vertical;\n\t}\n\t\n\t.product-bottom {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\t\n\t.product-price {\n\t\tfont-size: 30rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t.add-to-cart-btn {\n\t\twidth: 50rpx;\n\t\theight: 50rpx;\n\t\tbackground-color: #7b68ee;\n\t\tborder-radius: 50%;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t\n\t.add-icon {\n\t\twidth: 30rpx;\n\t\theight: 30rpx;\n\t}\n\t\n\t/* 加载状态 */\n\t.load-more, .loading-more {\n\t\ttext-align: center;\n\t\tpadding: 20rpx 0;\n\t}\n\t\n\t.load-more text, .loading-more text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #888888;\n\t\tvertical-align: middle;\n\t}\n\t\n\t.loading-more .loading-spinner {\n\t\twidth: 30rpx;\n\t\theight: 30rpx;\n\t\tmargin-right: 10rpx;\n\t\tmargin-bottom: 0;\n\t\tdisplay: inline-block;\n\t\tvertical-align: middle;\n\t}\n\t\n\t/* 搜索无结果 */\n\t.no-results {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\theight: 50vh;\n\t}\n\t\n\t.empty-icon {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tmargin-bottom: 20rpx;\n\t\topacity: 0.5;\n\t}\n\t\n\t.no-results-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #888888;\n\t}\n\t\n\t/* 商品详情弹窗 */\n\t.product-detail-popup {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tz-index: 1000;\n\t\t/* 提前创建层叠上下文 */\n\t\ttransform: translateZ(0);\n\t\tpointer-events: auto;\n\t}\n\t\n\t.popup-mask {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground-color: rgba(0, 0, 0, 0.7);\n\t\twill-change: opacity;\n\t\t-webkit-backface-visibility: hidden;\n\t\tbackface-visibility: hidden;\n\t}\n\t\n\t.popup-content {\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\tbackground-color: #1a1a1a;\n\t\tborder-radius: 30rpx 30rpx 0 0;\n\t\toverflow: hidden;\n\t\tbox-sizing: border-box;\n\t\t/* 使用transform提高性能 */\n\t\ttransform: translateY(100%);\n\t\twill-change: transform;\n\t\t-webkit-backface-visibility: hidden;\n\t\tbackface-visibility: hidden;\n\t\t/* 设置最大高度 */\n\t\tmax-height: 85vh;\n\t\toverflow-y: auto;\n\t}\n\t\n\t/* 新增：内容容器 */\n\t.popup-inner {\n\t\twidth: 100%;\n\t\twill-change: opacity;\n\t\t-webkit-backface-visibility: hidden;\n\t\tbackface-visibility: hidden;\n\t}\n\t\n\t.close-btn {\n\t\tposition: absolute;\n\t\ttop: 20rpx;\n\t\tright: 20rpx;\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tz-index: 10;\n\t}\n\t\n\t.close-icon {\n\t\twidth: 30rpx;\n\t\theight: 30rpx;\n\t}\n\t\n\t/* 商品详情头部 */\n\t.detail-header {\n\t\tposition: relative;\n\t}\n\t\n\t.detail-image {\n\t\twidth: 100%;\n\t\theight: 400rpx;\n\t\tbackground-color: #262626;\n\t}\n\t\n\t.detail-basic-info {\n\t\tpadding: 30rpx;\n\t}\n\t\n\t.name-price-row {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 10rpx;\n\t}\n\t\n\t.detail-name {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #ffffff;\n\t\tflex: 1;\n\t\tmargin-right: 20rpx;\n\t}\n\t\n\t.detail-price {\n\t\tfont-size: 36rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t.detail-sales {\n\t\tfont-size: 24rpx;\n\t\tcolor: #888888;\n\t}\n\t\n\t/* 规格选择区域 */\n\t.specifications {\n\t\tpadding: 0 30rpx;\n\t}\n\t\n\t.spec-section {\n\t\tmargin-bottom: 30rpx;\n\t}\n\t\n\t.spec-title-row {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.spec-icon {\n\t\twidth: 24rpx;\n\t\theight: 24rpx;\n\t\tmargin-right: 10rpx;\n\t}\n\t\n\t.spec-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t\tfont-weight: bold;\n\t}\n\t\n\t.spec-options {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t}\n\t\n\t.spec-option {\n\t\tmin-width: 120rpx;\n\t\theight: 60rpx;\n\t\tbackground-color: #262626;\n\t\tborder-radius: 30rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmargin-right: 20rpx;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 0 20rpx;\n\t}\n\t\n\t.spec-option text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.spec-option.selected {\n\t\tbackground-color: rgba(123, 104, 238, 0.2);\n\t\tborder: 1rpx solid #7b68ee;\n\t}\n\t\n\t.spec-option.selected text {\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t/* 配料选择 */\n\t.ingredient-options {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: flex-start;\n\t\twidth: 100%;\n\t}\n\t\n\t.ingredient-item {\n\t\twidth: 30%;\n\t\tmin-width: 120rpx;\n\t\theight: auto;\n\t\tbackground-color: #262626;\n\t\tborder-radius: 10rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmargin-right: 10rpx;\n\t\tmargin-bottom: 15rpx;\n\t\tpadding: 12rpx 10rpx;\n\t\tbox-sizing: border-box;\n\t\tborder: 1rpx solid transparent;\n\t}\n\t\n\t.ingredient-item:nth-child(3n) {\n\t\tmargin-right: 0;\n\t}\n\t\n\t.ingredient-item.selected {\n\t\tbackground-color: rgba(123, 104, 238, 0.2);\n\t\tborder: 1rpx solid #7b68ee;\n\t}\n\t\n\t.ingredient-name {\n\t\tfont-size: 24rpx;\n\t\tcolor: #ffffff;\n\t\tmargin-bottom: 4rpx;\n\t\ttext-align: center;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tmax-width: 100%;\n\t}\n\t\n\t.ingredient-price {\n\t\tfont-size: 22rpx;\n\t\tcolor: #7b68ee;\n\t\ttext-align: center;\n\t}\n\t\n\t/* 数量调整 */\n\t.quantity-section {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 30rpx;\n\t\tborder-bottom: 1rpx solid #262626;\n\t}\n\t\n\t.quantity-label {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.quantity-control {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t\n\t.quantity-btn {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tbackground-color: #262626;\n\t\tborder-radius: 30rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tfont-size: 30rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.quantity-input {\n\t\twidth: 80rpx;\n\t\ttext-align: center;\n\t\tmargin: 0 20rpx;\n\t\tbackground-color: transparent;\n\t\tcolor: #ffffff;\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t/* 底部操作区 */\n\t.detail-footer {\n\t\tdisplay: flex;\n\t\tpadding: 30rpx;\n\t\talign-items: center;\n\t}\n\t\n\t.total-price {\n\t\tflex: 1;\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.price-value {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t.add-to-cart {\n\t\tmin-width: 240rpx;\n\t\theight: 80rpx;\n\t\tbackground-color: #7b68ee;\n\t\tborder-radius: 40rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t\n\t.add-to-cart text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t}\n</style> ","import MiniProgramPage from 'C:/Users/LXD/Desktop/奶茶点单系统/milktea-uniapp/pages/menu/search.vue'\nwx.createPage(MiniProgramPage)"],"names":["api","uni"],"mappings":"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"}