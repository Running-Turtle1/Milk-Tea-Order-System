{"version":3,"file":"order.js","sources":["pages/order/order.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXIvb3JkZXIudnVl"],"sourcesContent":["<template>\n\t<view class=\"order-container\">\n\t\t<!-- 标签切换栏 -->\n\t\t<view class=\"tabs\">\n\t\t\t<view \n\t\t\t\tv-for=\"(tab, index) in tabs\" \n\t\t\t\t:key=\"index\" \n\t\t\t\t:class=\"['tab-item', activeTab === index ? 'active' : '']\"\n\t\t\t\t@click=\"switchTab(index)\"\n\t\t\t>\n\t\t\t\t<text>{{tab}}</text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 订单列表 -->\n\t\t<scroll-view \n\t\t\tclass=\"order-list\" \n\t\t\tscroll-y=\"true\"\n\t\t\t@scrolltolower=\"loadMore\"\n\t\t\trefresher-enabled\n\t\t\t:refresher-triggered=\"refreshing\"\n\t\t\t@refresherrefresh=\"onRefresh\"\n\t\t\t@click=\"closeAllSwipe\"\n\t\t>\n\t\t\t<!-- 加载中提示 -->\n\t\t\t<view class=\"loading-box\" v-if=\"loading && !refreshing && orders.length === 0\">\n\t\t\t\t<view class=\"loading-spinner\"></view>\n\t\t\t\t<text class=\"loading-text\">加载中...</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 空状态显示 -->\n\t\t\t<view class=\"empty-state\" v-if=\"orders.length === 0 && !loading\">\n\t\t\t\t<image src=\"/static/tabbar/order.png\" class=\"empty-icon\"></image>\n\t\t\t\t<text class=\"empty-text\">{{emptyText}}</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 订单项目 -->\n\t\t\t<view \n\t\t\t\tclass=\"order-item-wrapper\" \n\t\t\t\tv-for=\"(order, index) in orders\" \n\t\t\t\t:key=\"index\"\n\t\t\t\t@touchstart=\"touchStart($event, index)\"\n\t\t\t\t@touchmove=\"touchMove($event, index)\"\n\t\t\t\t@touchend=\"touchEnd($event, index)\"\n\t\t\t>\n\t\t\t\t<!-- 删除按钮和退款按钮放在容器内，但在卡片前面声明 -->\n\t\t\t\t<view class=\"action-buttons\">\n\t\t\t\t\t<view class=\"refund-button\" v-if=\"order.status === 1\" @click.stop=\"applyRefund(order)\">申请退款</view>\n\t\t\t\t<view class=\"delete-button\" @click.stop=\"deleteOrder(order.orderNo)\">删除</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"order-item-container\" :style=\"{transform: `translateX(${order.offset || 0}px)`}\" @click=\"goToOrderDetail(order.orderNo)\">\n\t\t\t\t\t<view class=\"order-item\">\n\t\t\t\t<view class=\"order-header\">\n\t\t\t\t\t<view class=\"order-number\">订单号: {{order.orderNo}}</view>\n\t\t\t\t\t<view class=\"order-status\">{{order.statusText}}</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"order-products\">\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"product-item\" \n\t\t\t\t\t\tv-for=\"(product, pIndex) in order.orderDetails\" \n\t\t\t\t\t\t:key=\"pIndex\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<image class=\"product-image\" :src=\"product.productImage\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t<view class=\"product-info\">\n\t\t\t\t\t\t\t<view class=\"product-name\">{{product.productName}}</view>\n\t\t\t\t\t\t\t<view class=\"product-spec\" v-if=\"product.temperature || product.sweetness\">\n\t\t\t\t\t\t\t\t<text v-if=\"product.temperature\">{{product.temperature}}</text>\n\t\t\t\t\t\t\t\t<text v-if=\"product.temperature && product.sweetness\"> / </text>\n\t\t\t\t\t\t\t\t<text v-if=\"product.sweetness\">{{product.sweetness}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"product-ingredients\" v-if=\"product.ingredients && product.ingredients.length > 0\">\n\t\t\t\t\t\t\t\t配料: \n\t\t\t\t\t\t\t\t<text v-for=\"(ing, iIndex) in product.ingredients\" :key=\"iIndex\">\n\t\t\t\t\t\t\t\t\t{{ing.name}}{{iIndex < product.ingredients.length - 1 ? '、' : ''}}\n\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"product-price-qty\">\n\t\t\t\t\t\t\t<view class=\"product-price\">¥{{product.price.toFixed(2)}}</view>\n\t\t\t\t\t\t\t<view class=\"product-qty\">x{{product.quantity}}</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"order-footer\">\n\t\t\t\t\t<view class=\"order-total\">\n\t\t\t\t\t\t<text>共{{getTotalQuantity(order)}}件商品</text>\n\t\t\t\t\t\t<text class=\"order-amount\">实付: ¥{{order.paymentAmount.toFixed(2)}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"order-time\">{{formatDate(order.createdAt)}}</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 订单操作按钮 -->\n\t\t\t\t\t<view class=\"order-actions\" @click.stop>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclass=\"action-btn cancel-btn\" \n\t\t\t\t\t\t\tv-if=\"order.status === 0\" \n\t\t\t\t\t\t\t@click.stop=\"cancelOrder(order)\"\n\t\t\t\t\t\t>取消订单</button>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclass=\"action-btn pay-btn\" \n\t\t\t\t\t\t\tv-if=\"order.status === 0\" \n\t\t\t\t\t\t\t@click.stop=\"goToOrderDetail(order.orderNo)\"\n\t\t\t\t\t\t>去支付</button>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclass=\"action-btn detail-btn\" \n\t\t\t\t\t\t\t@click.stop=\"goToOrderDetail(order.orderNo)\"\n\t\t\t\t\t\t>订单详情</button>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 底部加载更多提示 -->\n\t\t\t<view class=\"load-more\" v-if=\"orders.length > 0 && hasMore && !loading\">\n\t\t\t\t<text>上拉加载更多</text>\n\t\t\t</view>\n\t\t\t<view class=\"load-more\" v-else-if=\"orders.length > 0 && !hasMore\">\n\t\t\t\t<text>已加载全部</text>\n\t\t\t</view>\n\t\t\t<view class=\"loading-box\" v-if=\"loading && orders.length > 0\">\n\t\t\t\t<view class=\"loading-spinner\"></view>\n\t\t\t\t<text class=\"loading-text\">加载中...</text>\n\t\t\t</view>\n\t\t</scroll-view>\n\t</view>\n</template>\n\n<script>\n\timport api from '@/utils/api.js';\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttabs: ['全部', '待支付', '已支付', '已取消', '售后'],\n\t\t\t\tactiveTab: 0,\n\t\t\t\torders: [],\n\t\t\t\tloading: false,\n\t\t\t\trefreshing: false,\n\t\t\t\thasMore: true,\n\t\t\t\tpage: 0,\n\t\t\t\tsize: 5,\n\t\t\t\temptyText: '暂无订单',\n\t\t\t\t// 左滑删除相关数据\n\t\t\t\tdeleteButtonWidth: 70, // 删除按钮宽度为70px\n\t\t\t\trefundButtonWidth: 100, // 退款按钮宽度为100px\n\t\t\t\ttouchStartX: 0,\n\t\t\t\ttouchStartY: 0,\n\t\t\t\tdirection: '',\n\t\t\t\tactiveIndex: -1,\n\t\t\t\tisMoving: false\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\tthis.checkLoginStatus();\n\t\t\tthis.loadOrders();\n\t\t\t\n\t\t\t// 注意：不使用$getAppWebview方法，它在小程序环境中不可用\n\t\t\t// 改为依赖scroll-view的点击事件来关闭滑动项\n\t\t},\n\t\tonShow() {\n\t\t\t// 页面显示时刷新一次数据\n\t\t\tthis.refreshOrders();\n\t\t},\n\t\tmethods: {\n\t\t\t// 检查登录状态\n\t\t\tcheckLoginStatus() {\n\t\t\t\tconst token = uni.getStorageSync('token');\n\t\t\t\tif (!token) {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '未登录提示',\n\t\t\t\t\t\tcontent: '您尚未登录，是否前往登录页面？',\n\t\t\t\t\t\tconfirmText: '去登录',\n\t\t\t\t\t\tcancelText: '取消',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\turl: '/pages/login/login'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 取消登录时，跳转到菜单页\n\t\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\t\turl: '/pages/menu/menu'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 切换标签\n\t\t\tswitchTab(index) {\n\t\t\t\tif (this.activeTab !== index) {\n\t\t\t\t\tthis.activeTab = index;\n\t\t\t\t\tthis.refreshOrders();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 刷新订单\n\t\t\trefreshOrders() {\n\t\t\t\tthis.orders = [];\n\t\t\t\tthis.page = 0;\n\t\t\t\tthis.hasMore = true;\n\t\t\t\tthis.loadOrders();\n\t\t\t},\n\t\t\t\n\t\t\t// 下拉刷新\n\t\t\tonRefresh() {\n\t\t\t\tthis.refreshing = true;\n\t\t\t\tthis.refreshOrders();\n\t\t\t\t\n\t\t\t\t// 1.5秒后结束刷新状态\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.refreshing = false;\n\t\t\t\t}, 1500);\n\t\t\t},\n\t\t\t\n\t\t\t// 加载订单列表\n\t\t\tloadOrders() {\n\t\t\t\tif (this.loading || !this.hasMore) return;\n\t\t\t\t\n\t\t\t\tthis.loading = true;\n\t\t\t\t\n\t\t\t\t// 根据激活的标签页获取状态筛选\n\t\t\t\tlet status = undefined; // 使用undefined而不是null\n\t\t\t\tswitch(this.activeTab) {\n\t\t\t\t\tcase 1: // 待支付\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2: // 已支付\n\t\t\t\t\t\tstatus = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3: // 已取消\n\t\t\t\t\t\tstatus = 5;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4: // 售后（包含退款中、已退款、拒绝退款）\n\t\t\t\t\t\t// 使用数组传递多个状态值或特殊处理\n\t\t\t\t\t\tthis.loadRefundOrders();\n\t\t\t\t\t\treturn; // 提前返回，不执行下面的常规订单获取\n\t\t\t\t\t// 不设置default，保持status为undefined\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 打印状态值和类型，方便调试\n\t\t\t\tconsole.log('请求订单列表，状态:', status, '类型:', typeof status);\n\t\t\t\t\n\t\t\t\tapi.getOrders(status, this.page, this.size)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('获取订单列表响应:', res.data);\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\tconst data = res.data.data;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 合并数据\n\t\t\t\t\t\t\tthis.orders = this.orders.concat(data.content || []);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 判断是否还有更多数据\n\t\t\t\t\t\t\tif (data.last) {\n\t\t\t\t\t\t\t\tthis.hasMore = false;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.page++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 更新空数据提示\n\t\t\t\t\t\t\tthis.updateEmptyText();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: res.data.message || '获取订单失败',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 加载退款相关订单\n\t\t\tloadRefundOrders() {\n\t\t\t\t// 获取所有退款相关状态的订单（退款中:3、已退款:4、拒绝退款:6）\n\t\t\t\tPromise.all([\n\t\t\t\t\tapi.getOrders(3, this.page, this.size), // 退款中\n\t\t\t\t\tapi.getOrders(4, this.page, this.size), // 已退款\n\t\t\t\t\tapi.getOrders(6, this.page, this.size)  // 拒绝退款\n\t\t\t\t])\n\t\t\t\t.then(responses => {\n\t\t\t\t\t// 处理三个请求的响应\n\t\t\t\t\tlet allRefundOrders = [];\n\t\t\t\t\t\n\t\t\t\t\t// 合并所有退款相关订单\n\t\t\t\t\tresponses.forEach(res => {\n\t\t\t\t\t\tif (res.data && res.data.code === 200 && res.data.data) {\n\t\t\t\t\t\t\tconst data = res.data.data;\n\t\t\t\t\t\t\tallRefundOrders = allRefundOrders.concat(data.content || []);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// 按时间倒序排序\n\t\t\t\t\tallRefundOrders.sort((a, b) => {\n\t\t\t\t\t\treturn new Date(b.createdAt) - new Date(a.createdAt);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// 添加数据到订单列表\n\t\t\t\t\tthis.orders = this.orders.concat(allRefundOrders);\n\t\t\t\t\t\n\t\t\t\t\t// 由于已经获取了所有退款订单，标记为没有更多数据\n\t\t\t\t\tthis.hasMore = false;\n\t\t\t\t\t\n\t\t\t\t\t// 更新空数据提示\n\t\t\t\t\tif (this.orders.length === 0) {\n\t\t\t\t\t\tthis.emptyText = '暂无售后订单';\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error('获取退款订单失败:', err);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '获取售后订单失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 更新空数据提示\n\t\t\tupdateEmptyText() {\n\t\t\t\tif (this.orders.length === 0) {\n\t\t\t\t\tswitch(this.activeTab) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tthis.emptyText = '暂无订单';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tthis.emptyText = '暂无待支付订单';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\tthis.emptyText = '暂无已支付订单';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\tthis.emptyText = '暂无已取消订单';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\tthis.emptyText = '暂无售后订单';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthis.emptyText = '暂无订单';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 加载更多\n\t\t\tloadMore() {\n\t\t\t\tif (this.hasMore && !this.loading) {\n\t\t\t\t\tthis.loadOrders();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 取消订单\n\t\t\tcancelOrder(order) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要取消该订单吗？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: '取消中...'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tapi.cancelOrder(order.orderNo)\n\t\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\tconsole.log('取消订单响应:', res.data);\n\t\t\t\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '订单已取消',\n\t\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// 刷新订单列表\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\tthis.refreshOrders();\n\t\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: res.data.message || '取消订单失败',\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 查看订单详情\n\t\t\tgoToOrderDetail(orderNo) {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/order/detail?orderNo=${orderNo}`\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 格式化日期\n\t\t\tformatDate(dateStr) {\n\t\t\t\tif (!dateStr) return '';\n\t\t\t\t\n\t\t\t\t// 假设日期格式: 2025-04-24 18:47:20\n\t\t\t\tconst parts = dateStr.split(' ');\n\t\t\t\tif (parts.length >= 1) {\n\t\t\t\t\tconst datePart = parts[0];\n\t\t\t\t\tconst timePart = parts.length > 1 ? parts[1] : '';\n\t\t\t\t\t\n\t\t\t\t\treturn `${datePart} ${timePart.substring(0, 5)}`;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn dateStr;\n\t\t\t},\n\t\t\t\n\t\t\t// 获取订单总商品数量\n\t\t\tgetTotalQuantity(order) {\n\t\t\t\tif (!order.orderDetails || !order.orderDetails.length) return 0;\n\t\t\t\t\n\t\t\t\treturn order.orderDetails.reduce((total, product) => {\n\t\t\t\t\treturn total + product.quantity;\n\t\t\t\t}, 0);\n\t\t\t},\n\t\t\t\n\t\t\t// 触摸开始事件处理\n\t\t\ttouchStart(e, index) {\n\t\t\t\t// 记录开始触摸的位置\n\t\t\t\tthis.touchStartX = e.touches[0].clientX;\n\t\t\t\tthis.touchStartY = e.touches[0].clientY;\n\t\t\t\tthis.direction = '';\n\t\t\t\tthis.isMoving = false;\n\t\t\t\tthis.activeIndex = index;\n\t\t\t\t\n\t\t\t\t// 如果有其他已滑出的项，先关闭它们\n\t\t\t\tthis.orders.forEach((order, idx) => {\n\t\t\t\t\tif (idx !== index && order.offset) {\n\t\t\t\t\t\tthis.$set(order, 'offset', 0);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 触摸移动事件处理\n\t\t\ttouchMove(e, index) {\n\t\t\t\tif (this.activeIndex !== index) return;\n\t\t\t\t\n\t\t\t\tconst moveX = e.touches[0].clientX;\n\t\t\t\tconst moveY = e.touches[0].clientY;\n\t\t\t\t\n\t\t\t\t// 计算横向和纵向移动的距离\n\t\t\t\tconst deltaX = moveX - this.touchStartX;\n\t\t\t\tconst deltaY = moveY - this.touchStartY;\n\t\t\t\t\n\t\t\t\t// 如果还没确定方向\n\t\t\t\tif (!this.direction) {\n\t\t\t\t\t// 降低水平滑动判定阈值，从10px降到5px\n\t\t\t\t\tif (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 5) {\n\t\t\t\t\t\tthis.direction = 'horizontal';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.direction = 'vertical';\n\t\t\t\t\t\treturn; // 如果是纵向滑动，不处理\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 如果是横向滑动\n\t\t\t\tif (this.direction === 'horizontal') {\n\t\t\t\t\t// 设置移动标志\n\t\t\t\t\tthis.isMoving = true;\n\t\t\t\t\t\n\t\t\t\t\t// 计算偏移量，只允许左滑（负值）\n\t\t\t\t\tlet offset = deltaX;\n\t\t\t\t\t\n\t\t\t\t\t// 如果是右滑并且没有打开的删除按钮，直接忽略\n\t\t\t\t\tif (deltaX > 0 && !(this.orders[index].offset < 0)) {\n\t\t\t\t\t\toffset = 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 限制最大左滑距离，根据按钮总宽度调整\n\t\t\t\t\tconst maxOffset = this.orders[index].status === 1 ? \n\t\t\t\t\t                  -(this.deleteButtonWidth + this.refundButtonWidth + 2) : \n\t\t\t\t\t                  -(this.deleteButtonWidth + 2); // +2px偏移\n\t\t\t\t\t\n\t\t\t\t\tif (offset < maxOffset) {\n\t\t\t\t\t\toffset = maxOffset;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 应用偏移量\n\t\t\t\t\tthis.$set(this.orders[index], 'offset', offset);\n\t\t\t\t\t\n\t\t\t\t\t// 阻止滚动\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 触摸结束事件处理\n\t\t\ttouchEnd(e, index) {\n\t\t\t\tif (this.activeIndex !== index || !this.isMoving) return;\n\t\t\t\t\n\t\t\t\tconst order = this.orders[index];\n\t\t\t\tconst offset = order.offset || 0;\n\t\t\t\t\n\t\t\t\t// 计算最大偏移量\n\t\t\t\tconst maxOffset = order.status === 1 ? \n\t\t\t\t                  -(this.deleteButtonWidth + this.refundButtonWidth + 2) : \n\t\t\t\t                  -(this.deleteButtonWidth + 2);\n\t\t\t\t\n\t\t\t\t// 降低左滑触发阈值\n\t\t\t\tif (offset < -20) {\n\t\t\t\t\t// 完全展开操作按钮\n\t\t\t\t\tthis.$set(order, 'offset', maxOffset);\n\t\t\t\t} else {\n\t\t\t\t\t// 否则恢复原位\n\t\t\t\t\tthis.$set(order, 'offset', 0);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 重置移动状态\n\t\t\t\tthis.isMoving = false;\n\t\t\t},\n\t\t\t\n\t\t\t// 关闭所有滑动项\n\t\t\tcloseAllSwipe() {\n\t\t\t\tif (!this.orders) return;\n\t\t\t\t\n\t\t\t\tthis.orders.forEach((order, index) => {\n\t\t\t\t\tif (order.offset) {\n\t\t\t\t\t\tthis.$set(order, 'offset', 0);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 删除订单\n\t\t\tdeleteOrder(orderNo) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要删除该订单吗？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: '删除中...'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tapi.deleteOrder(orderNo)\n\t\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\t\tconsole.log('删除订单响应:', res.data);\n\t\t\t\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// 刷新订单列表\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\tthis.refreshOrders();\n\t\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: res.data.message || '删除订单失败',\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 申请退款\n\t\t\tapplyRefund(order) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '申请退款',\n\t\t\t\t\tcontent: '确定要申请退款吗？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\turl: `/pages/order/refund?orderNo=${order.orderNo}&amount=${order.paymentAmount}`\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.order-container {\n\t\tbackground-color: #121212;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\toverflow-x: hidden;\n\t}\n\t\n\t/* 标签切换栏 */\n\t.tabs {\n\t\tdisplay: flex;\n\t\tbackground-color: #1a1a1a;\n\t\theight: 90rpx;\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tz-index: 10;\n\t\twidth: 100%;\n\t\twhite-space: nowrap;\n\t\toverflow-x: auto;\n\t}\n\t\n\t.tab-item {\n\t\tflex: 1;\n\t\tmin-width: 100rpx; /* 调整最小宽度适应5个标签 */\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tcolor: #888888;\n\t\tfont-size: 24rpx;\n\t\tposition: relative;\n\t\tpadding: 0 4rpx; /* 略微减小内边距 */\n\t}\n\t\n\t.tab-item.active {\n\t\tcolor: #7b68ee;\n\t\tfont-weight: bold;\n\t}\n\t\n\t.tab-item.active::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\twidth: 50rpx;\n\t\theight: 6rpx;\n\t\tbackground-color: #7b68ee;\n\t\tborder-radius: 3rpx;\n\t}\n\t\n\t/* 订单列表 */\n\t.order-list {\n\t\tflex: 1;\n\t\tpadding: 20rpx;\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t\theight: calc(100vh - 90rpx);\n\t}\n\t\n\t/* 订单项目 */\n\t.order-item-wrapper {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tmargin-bottom: 20rpx;\n\t\toverflow: hidden;\n\t\tborder-radius: 16rpx;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.action-buttons {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tz-index: 1;\n\t}\n\t\n\t.delete-button {\n\t\twidth: 70px; /* 改为px单位，确保与JS中的值匹配 */\n\t\theight: 100%;\n\t\tbackground-color: #ff4c4c;\n\t\tcolor: #ffffff;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tfont-size: 30rpx;\n\t\tfont-weight: bold;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.refund-button {\n\t\twidth: 100px; /* 退款按钮宽度 */\n\t\theight: 100%;\n\t\tbackground-color: #ff9800;\n\t\tcolor: #ffffff;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tfont-size: 30rpx;\n\t\tfont-weight: bold;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.order-item-container {\n\t\twidth: 100%;\n\t\ttransition: transform 0.2s ease-out; /* 减少动画时间，减轻阻尼感 */\n\t\tposition: relative;\n\t\tz-index: 2;\n\t\tbackground-color: #1a1a1a;\n\t\tborder-radius: 16rpx;\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\n\t\tbox-sizing: border-box;\n\t\toverflow: hidden; /* 确保内容不溢出 */\n\t\ttransform: translateX(0); /* 确保默认位置正确 */\n\t}\n\t\n\t.order-item {\n\t\tpadding: 0;\n\t\tbackground-color: #1a1a1a;\n\t\tborder-radius: 16rpx;\n\t\toverflow: hidden;\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.2);\n\t\tmargin-left: auto;\n\t\tmargin-right: auto;\n\t\tbox-sizing: border-box;\n\t\tborder-right: 1px solid #1a1a1a; /* 添加右边框，确保边缘严实 */\n\t}\n\t\n\t.order-header {\n\t\tpadding: 12rpx;\n\t\tborder-bottom: 2rpx solid #2a2a2a;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\t\n\t.order-number {\n\t\tfont-size: 22rpx;\n\t\tcolor: #888888;\n\t\tmax-width: 65%;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t\n\t.order-status {\n\t\tfont-size: 26rpx;\n\t\tcolor: #7b68ee;\n\t\tfont-weight: bold;\n\t}\n\t\n\t.order-products {\n\t\tpadding: 10rpx 12rpx;\n\t}\n\t\n\t.product-item {\n\t\tdisplay: flex;\n\t\tpadding: 12rpx 0;\n\t\tborder-bottom: 1rpx solid #2a2a2a;\n\t}\n\t\n\t.product-item:last-child {\n\t\tborder-bottom: none;\n\t}\n\t\n\t.product-image {\n\t\twidth: 90rpx;\n\t\theight: 90rpx;\n\t\tborder-radius: 8rpx;\n\t\tbackground-color: #2a2a2a;\n\t\tflex-shrink: 0;\n\t}\n\t\n\t.product-info {\n\t\tflex: 1;\n\t\tmargin-left: 12rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tmin-width: 0; /* 确保弹性项可以缩小到比内容更小 */\n\t\toverflow: hidden;\n\t}\n\t\n\t.product-name {\n\t\tfont-size: 24rpx;\n\t\tcolor: #ffffff;\n\t\tmargin-bottom: 6rpx;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t\n\t.product-spec {\n\t\tfont-size: 22rpx;\n\t\tcolor: #888888;\n\t\tmargin-bottom: 6rpx;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t\n\t.product-ingredients {\n\t\tfont-size: 20rpx;\n\t\tcolor: #888888;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t\n\t.product-price-qty {\n\t\tmin-width: 90rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-end;\n\t\tjustify-content: center;\n\t\tflex-shrink: 0;\n\t}\n\t\n\t.product-price {\n\t\tfont-size: 24rpx;\n\t\tcolor: #ffffff;\n\t\tmargin-bottom: 6rpx;\n\t}\n\t\n\t.product-qty {\n\t\tfont-size: 22rpx;\n\t\tcolor: #888888;\n\t}\n\t\n\t.order-footer {\n\t\tpadding: 12rpx;\n\t\tborder-top: 2rpx solid #2a2a2a;\n\t}\n\t\n\t.order-total {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 12rpx;\n\t\tfont-size: 24rpx;\n\t\tcolor: #888888;\n\t}\n\t\n\t.order-amount {\n\t\tfont-size: 26rpx;\n\t\tcolor: #ffffff;\n\t\tfont-weight: bold;\n\t}\n\t\n\t.order-time {\n\t\tfont-size: 22rpx;\n\t\tcolor: #888888;\n\t\tmargin-bottom: 15rpx;\n\t}\n\t\n\t.order-actions {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\tmargin-top: 10rpx;\n\t\tflex-wrap: wrap;\n\t\tgap: 10rpx;\n\t}\n\t\n\t.action-btn {\n\t\tmargin-left: 10rpx;\n\t\tfont-size: 20rpx;\n\t\tpadding: 6rpx 16rpx;\n\t\tbackground-color: transparent;\n\t\tborder-radius: 30rpx;\n\t\theight: 46rpx;\n\t\tline-height: 34rpx;\n\t\tz-index: 2;\n\t}\n\t\n\t.cancel-btn {\n\t\tcolor: #888888;\n\t\tborder: 2rpx solid #888888;\n\t}\n\t\n\t.pay-btn {\n\t\tcolor: #7b68ee;\n\t\tborder: 2rpx solid #7b68ee;\n\t}\n\t\n\t.detail-btn {\n\t\tcolor: #ffffff;\n\t\tborder: 2rpx solid #ffffff;\n\t}\n\t\n\t/* 加载中 */\n\t.loading-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\theight: 200rpx;\n\t}\n\t\n\t.loading-spinner {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tborder: 4rpx solid #7b68ee;\n\t\tborder-top-color: transparent;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 0.8s linear infinite;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t@keyframes spin {\n\t\t0% { transform: rotate(0deg); }\n\t\t100% { transform: rotate(360deg); }\n\t}\n\t\n\t.loading-text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #888888;\n\t}\n\t\n\t/* 空状态显示 */\n\t.empty-state {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\theight: 400rpx;\n\t}\n\t\n\t.empty-icon {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tmargin-bottom: 20rpx;\n\t\topacity: 0.5;\n\t}\n\t\n\t.empty-text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #888888;\n\t}\n\t\n\t/* 加载更多 */\n\t.load-more {\n\t\ttext-align: center;\n\t\tpadding: 20rpx 0;\n\t}\n\t\n\t.load-more text {\n\t\tfont-size: 22rpx;\n\t\tcolor: #888888;\n\t}\n</style> ","import MiniProgramPage from 'C:/Users/LXD/Desktop/奶茶点单系统/milktea-uniapp/pages/order/order.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","api","res"],"mappings":"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"}