{"version":3,"file":"cart.js","sources":["pages/cart/cart.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2FydC9jYXJ0LnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"cart-container\">\n\t\t<!-- 空购物车提示 -->\n\t\t<view class=\"empty-cart\" v-if=\"cartInfo.items && cartInfo.items.length === 0\">\n\t\t\t<image src=\"/static/tabbar/cart.png\" class=\"empty-icon\"></image>\n\t\t\t<text class=\"empty-text\">购物车空空如也</text>\n\t\t\t<view class=\"go-shopping-btn\" @click=\"goToMenu\">\n\t\t\t\t<button type=\"primary\" size=\"mini\">去选购</button>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 购物车内容 -->\n\t\t<view class=\"cart-content\" v-else @click=\"closeAllSwipe\">\n\t\t\t<!-- 头部操作栏 -->\n\t\t\t<view class=\"cart-header\">\n\t\t\t\t<text class=\"cart-title\">购物车</text>\n\t\t\t\t<text class=\"edit-btn\" @click=\"toggleEditMode\">{{isEditMode ? '完成' : '编辑'}}</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 商品列表 -->\n\t\t\t<scroll-view scroll-y class=\"cart-list\" @touchstart.stop=\"() => {}\">\n\t\t\t\t<!-- 商品项 - 重新实现左滑删除功能 -->\n\t\t\t\t<view \n\t\t\t\t\tclass=\"cart-item-wrapper\" \n\t\t\t\t\tv-for=\"(item, index) in cartInfo.items\" \n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t@touchstart=\"touchStart($event, index)\"\n\t\t\t\t\t@touchmove=\"touchMove($event, index)\"\n\t\t\t\t\t@touchend=\"touchEnd($event, index)\"\n\t\t\t\t>\n\t\t\t\t\t<!-- 删除按钮放在容器内，但在卡片前面声明，确保它在DOM中的顺序是先于卡片 -->\n\t\t\t\t\t<view class=\"delete-button\" @click.stop=\"removeItem(item.id)\">删除</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"cart-item-container\" :style=\"{transform: `translateX(${item.offset || 0}px)`}\">\n\t\t\t\t\t\t<view class=\"cart-item\">\n\t\t\t\t\t<!-- 选择框 -->\n\t\t\t\t\t\t\t<view class=\"checkbox\" @click.stop=\"toggleItemSelect(item.id, !item.selected)\">\n\t\t\t\t\t\t<text :class=\"['checkbox-icon', item.selected ? 'checked' : '']\"></text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 商品信息 -->\n\t\t\t\t\t<view class=\"item-content\">\n\t\t\t\t\t\t<image :src=\"item.productImage || '/static/default-product.png'\" class=\"item-image\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t<view class=\"item-details\">\n\t\t\t\t\t\t\t<view class=\"item-name\">{{item.productName}}</view>\n\t\t\t\t\t\t\t<view class=\"item-specs-container\">\n\t\t\t\t\t\t\t\t<view class=\"specs-row\" v-if=\"item.temperature || item.sweetness\">\n\t\t\t\t\t\t\t\t\t<text class=\"specs-label\">规格：</text>\n\t\t\t\t\t\t\t\t\t<text class=\"specs-value\">{{item.temperature || ''}}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"specs-value\" v-if=\"item.temperature && item.sweetness\">，</text>\n\t\t\t\t\t\t\t\t\t<text class=\"specs-value\">{{item.sweetness || ''}}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"specs-row\" v-if=\"item.ingredients && item.ingredients.length > 0\">\n\t\t\t\t\t\t\t\t\t<text class=\"specs-label\">配料：</text>\n\t\t\t\t\t\t\t\t\t<text class=\"specs-value\">\n\t\t\t\t\t\t\t\t\t\t<text v-for=\"(ing, i) in item.ingredients\" :key=\"i\">\n\t\t\t\t\t\t\t\t\t\t\t{{ing.name}}{{i < item.ingredients.length - 1 ? '、' : ''}}\n\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"price-quantity\">\n\t\t\t\t\t\t\t\t<text class=\"item-price\">¥{{calculateItemTotalPrice(item).toFixed(2)}}</text>\n\t\t\t\t\t\t\t\t<view class=\"quantity-control\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"quantity-btn minus\" @click.stop=\"adjustQuantity(item.id, item.quantity - 1)\">-</text>\n\t\t\t\t\t\t\t\t\t<input type=\"number\" class=\"quantity-input\" :value=\"item.quantity\" disabled />\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"quantity-btn plus\" @click.stop=\"adjustQuantity(item.id, item.quantity + 1)\">+</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 编辑模式下的删除按钮 -->\n\t\t\t\t\t\t\t<view class=\"delete-btn\" v-if=\"isEditMode\" @click.stop=\"removeItem(item.id)\">\n\t\t\t\t\t\t<text class=\"delete-icon\">×</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t\t\n\t\t\t<!-- 底部结算栏 -->\n\t\t\t<view class=\"cart-footer\">\n\t\t\t\t<view class=\"select-all\" @click=\"toggleSelectAll(!allSelected)\">\n\t\t\t\t\t<text :class=\"['checkbox-icon', allSelected ? 'checked' : '']\"></text>\n\t\t\t\t\t<text class=\"select-all-text\">全选</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"footer-right\" v-if=\"!isEditMode\">\n\t\t\t\t\t<view class=\"price-info\">\n\t\t\t\t\t\t<view class=\"total-price\">\n\t\t\t\t\t\t\t合计: <text class=\"price-value\">¥{{cartInfo.selectedTotalPrice.toFixed(2)}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"checkout-btn\" @click=\"checkout\" :class=\"{'disabled': cartInfo.selectedTotalQuantity === 0}\">\n\t\t\t\t\t\t<text>结算({{cartInfo.selectedTotalQuantity}})</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"footer-right\" v-else>\n\t\t\t\t\t<view class=\"batch-delete-btn\" @click=\"removeSelectedItems\">\n\t\t\t\t\t\t<text>删除所选</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport api from '@/utils/api.js';\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcartInfo: {\n\t\t\t\t\titems: [],\n\t\t\t\t\ttotalPrice: 0,\n\t\t\t\t\ttotalQuantity: 0,\n\t\t\t\t\tselectedTotalPrice: 0,\n\t\t\t\t\tselectedTotalQuantity: 0,\n\t\t\t\t\tallProductsAvailable: true\n\t\t\t\t},\n\t\t\t\tisEditMode: false,\n\t\t\t\tloading: false,\n\t\t\t\t// 左滑删除相关数据\n\t\t\t\tdeleteButtonWidth: 70, // 调整删除按钮宽度为70px，与下面的px单位保持一致\n\t\t\t\ttouchStartX: 0,\n\t\t\t\ttouchStartY: 0,\n\t\t\t\tdirection: '',\n\t\t\t\tactiveIndex: -1,\n\t\t\t\tisMoving: false\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\t// 是否全选\n\t\t\tallSelected() {\n\t\t\t\tif (!this.cartInfo.items || this.cartInfo.items.length === 0) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn this.cartInfo.items.every(item => item.selected);\n\t\t\t}\n\t\t},\n\t\tonShow() {\n\t\t\tthis.fetchCartData();\n\t\t},\n\t\tmethods: {\n\t\t\t// 计算单个商品总价（包含配料）\n\t\t\tcalculateItemTotalPrice(item) {\n\t\t\t\t// 商品基础价格\n\t\t\t\tlet price = item.productPrice || 0;\n\t\t\t\t\n\t\t\t\t// 配料价格计算\n\t\t\t\tif (item.ingredients && item.ingredients.length > 0) {\n\t\t\t\t\tconst ingredientsPrice = item.ingredients.reduce((sum, ing) => {\n\t\t\t\t\t\treturn sum + (parseFloat(ing.price) || 0);\n\t\t\t\t\t}, 0);\n\t\t\t\t\tprice += ingredientsPrice;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn price;\n\t\t\t},\n\t\t\t\n\t\t\t// 获取购物车数据\n\t\t\tfetchCartData() {\n\t\t\t\tthis.loading = true;\n\t\t\t\tconst token = uni.getStorageSync('token');\n\t\t\t\t\n\t\t\t\tif (!token) {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t// 修改：不直接跳转到登录页，而是先弹出确认对话框\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '未登录提示',\n\t\t\t\t\t\tcontent: '您尚未登录，是否前往登录页面？',\n\t\t\t\t\t\tconfirmText: '去登录',\n\t\t\t\t\t\tcancelText: '取消',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tthis.redirectToLogin();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 取消登录时，跳转到菜单页\n\t\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\t\turl: '/pages/menu/menu'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tapi.request({\n\t\t\t\t\turl: '/cart',\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('获取购物车响应:', res.data);\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\tthis.cartInfo = res.data.data;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 如果没有items属性，初始化一个空数组\n\t\t\t\t\t\t\tif (!this.cartInfo.items) {\n\t\t\t\t\t\t\t\tthis.cartInfo.items = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t} else if (res.data.code === 401) {\n\t\t\t\t\t\t\tthis.handleTokenExpired();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showToast(res.data.message || '获取购物车失败');\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 调整商品数量\n\t\t\tadjustQuantity(itemId, newQuantity) {\n\t\t\t\tif (newQuantity < 1) {\n\t\t\t\t\tnewQuantity = 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 找到对应的商品\n\t\t\t\tconst itemIndex = this.cartInfo.items.findIndex(item => item.id === itemId);\n\t\t\t\tif (itemIndex === -1) {\n\t\t\t\t\tthis.showToast('找不到商品信息');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst item = this.cartInfo.items[itemIndex];\n\t\t\t\t\n\t\t\t\tapi.request({\n\t\t\t\t\turl: `/cart/${itemId}`,\n\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tproductId: item.productId,\n\t\t\t\t\t\tquantity: newQuantity,\n\t\t\t\t\t\ttemperature: item.temperature || '',\n\t\t\t\t\t\tsweetness: item.sweetness || '',\n\t\t\t\t\t\tingredients: item.ingredients || []\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('更新购物车响应:', res.data);\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\tthis.cartInfo = res.data.data;\n\t\t\t\t\t\t} else if (res.data.code === 401) {\n\t\t\t\t\t\t\tthis.handleTokenExpired();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showToast(res.data.message || '更新购物车失败');\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 切换商品选中状态\n\t\t\ttoggleItemSelect(itemId, selected) {\n\t\t\t\tapi.request({\n\t\t\t\t\turl: `/cart/select/${itemId}?selected=${selected}`,\n\t\t\t\t\tmethod: 'PUT'\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('切换选中状态响应:', res.data);\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\tthis.cartInfo = res.data.data;\n\t\t\t\t\t\t} else if (res.data.code === 401) {\n\t\t\t\t\t\t\tthis.handleTokenExpired();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showToast(res.data.message || '更新选中状态失败');\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 切换全选状态\n\t\t\ttoggleSelectAll(selected) {\n\t\t\t\tapi.request({\n\t\t\t\t\turl: `/cart/select-all?selected=${selected}`,\n\t\t\t\t\tmethod: 'PUT'\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('全选/取消全选响应:', res.data);\n\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\tthis.cartInfo = res.data.data;\n\t\t\t\t\t\t} else if (res.data.code === 401) {\n\t\t\t\t\t\t\tthis.handleTokenExpired();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showToast(res.data.message || '操作失败');\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 移除商品\n\t\t\tremoveItem(itemId) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要从购物车中移除该商品吗？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tapi.request({\n\t\t\t\t\t\t\t\turl: `/cart/${itemId}`,\n\t\t\t\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\t\tconsole.log('移除商品响应:', res.data);\n\t\t\t\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\t\t\t\tthis.cartInfo = res.data.data;\n\t\t\t\t\t\t\t\t\t\tthis.resetSwipeStatus(); // 重置所有左滑状态\n\t\t\t\t\t\t\t\t\t\tthis.showToast('删除成功', 'success');\n\t\t\t\t\t\t\t\t\t} else if (res.data.code === 401) {\n\t\t\t\t\t\t\t\t\t\tthis.handleTokenExpired();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthis.showToast(res.data.message || '移除商品失败');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 移除选中的商品\n\t\t\tremoveSelectedItems() {\n\t\t\t\tif (this.cartInfo.selectedTotalQuantity === 0) {\n\t\t\t\t\tthis.showToast('请选择要删除的商品');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要删除选中的商品吗？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tapi.request({\n\t\t\t\t\t\t\t\turl: '/cart/selected',\n\t\t\t\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\t\tconsole.log('删除选中商品响应:', res.data);\n\t\t\t\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\t\t\t\tthis.cartInfo = res.data.data;\n\t\t\t\t\t\t\t\t\t\tthis.resetSwipeStatus(); // 重置所有左滑状态\n\t\t\t\t\t\t\t\t\t\tthis.showToast('删除成功', 'success');\n\t\t\t\t\t\t\t\t\t} else if (res.data.code === 401) {\n\t\t\t\t\t\t\t\t\t\tthis.handleTokenExpired();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.showToast(res.data.message || '删除选中商品失败');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 清空购物车\n\t\t\tclearCart() {\n\t\t\t\tif (this.cartInfo.totalQuantity === 0) {\n\t\t\t\t\tthis.showToast('购物车已经是空的了');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要清空购物车吗？',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tapi.request({\n\t\t\t\t\t\t\t\turl: '/cart',\n\t\t\t\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\tconsole.log('清空购物车响应:', res.data);\n\t\t\t\t\t\t\tif (res.data.code === 200) {\n\t\t\t\t\t\t\t\tthis.cartInfo = res.data.data;\n\t\t\t\t\t\t\t\t\tthis.showToast('已清空购物车', 'success');\n\t\t\t\t\t\t\t} else if (res.data.code === 401) {\n\t\t\t\t\t\t\t\tthis.handleTokenExpired();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.showToast(res.data.message || '清空购物车失败');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tconsole.error('网络请求失败:', err);\n\t\t\t\t\t\t\tthis.showToast('网络请求失败');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 检查库存\n\t\t\tcheckStock() {\n\t\t\t\tif (this.cartInfo.selectedTotalQuantity === 0) {\n\t\t\t\t\tthis.showToast('请先选择商品');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\t\n\t\t\t// 结算\n\t\t\tasync checkout() {\n\t\t\t\tif (this.cartInfo.selectedTotalQuantity === 0) {\n\t\t\t\t\tthis.showToast('请选择要结算的商品');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\t// 获取选中的商品并确保包含价格信息\n\t\t\t\t\tconst selectedItems = this.cartInfo.items.filter(item => item.selected).map(item => {\n\t\t\t\t\t\t// 确保每个商品都有价格信息\n\t\t\t\t\t\tif (!item.productPrice && typeof item.productPrice !== 'number') {\n\t\t\t\t\t\t\tconsole.error('商品缺少价格信息:', item);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 创建新对象，确保包含所有必要信息\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\tprice: item.productPrice || 0, // 添加price字段作为备用\n\t\t\t\t\t\t\tquantity: item.quantity || 1,\n\t\t\t\t\t\t\t// 确保配料信息完整\n\t\t\t\t\t\t\tingredients: Array.isArray(item.ingredients) ? item.ingredients : []\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('传递到确认订单页面的商品数据:', selectedItems);\n\t\t\t\t\t\n\t\t\t\t\t// 将选中的商品数据传递到确认订单页面\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl: `/pages/order/confirm?items=${encodeURIComponent(JSON.stringify(selectedItems))}`\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('结算前检查失败:', error);\n\t\t\t\t\tthis.showToast('网络请求失败，请重试');\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 切换编辑模式\n\t\t\ttoggleEditMode() {\n\t\t\t\tthis.isEditMode = !this.isEditMode;\n\t\t\t},\n\t\t\t\n\t\t\t// 前往点单页\n\t\t\tgoToMenu() {\n\t\t\t\tuni.switchTab({\n\t\t\t\t\turl: '/pages/menu/menu'\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 重定向到登录页\n\t\t\tredirectToLogin() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/login/login'\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 处理Token过期\n\t\t\thandleTokenExpired() {\n\t\t\t\tuni.removeStorageSync('token');\n\t\t\t\t\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '登录已过期，请重新登录',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.redirectToLogin();\n\t\t\t\t}, 1500);\n\t\t\t},\n\t\t\t\n\t\t\t// 显示提示信息\n\t\t\tshowToast(title, icon = 'none') {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle,\n\t\t\t\t\ticon\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 修改触摸事件处理方法，提高灵敏度\n\t\t\ttouchStart(e, index) {\n\t\t\t\t// 记录开始触摸的位置\n\t\t\t\tthis.touchStartX = e.touches[0].clientX;\n\t\t\t\tthis.touchStartY = e.touches[0].clientY;\n\t\t\t\tthis.direction = '';\n\t\t\t\tthis.isMoving = false;\n\t\t\t\tthis.activeIndex = index;\n\t\t\t\t\n\t\t\t\t// 如果有其他已滑出的项，先关闭它们\n\t\t\t\tthis.cartInfo.items.forEach((item, idx) => {\n\t\t\t\t\tif (idx !== index && item.offset) {\n\t\t\t\t\t\tthis.$set(item, 'offset', 0);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\ttouchMove(e, index) {\n\t\t\t\tif (this.activeIndex !== index) return;\n\t\t\t\t\n\t\t\t\tconst moveX = e.touches[0].clientX;\n\t\t\t\tconst moveY = e.touches[0].clientY;\n\t\t\t\t\n\t\t\t\t// 计算横向和纵向移动的距离\n\t\t\t\tconst deltaX = moveX - this.touchStartX;\n\t\t\t\tconst deltaY = moveY - this.touchStartY;\n\t\t\t\t\n\t\t\t\t// 如果还没确定方向\n\t\t\t\tif (!this.direction) {\n\t\t\t\t\t// 降低水平滑动判定阈值，从10px降到5px\n\t\t\t\t\tif (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 5) {\n\t\t\t\t\t\tthis.direction = 'horizontal';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.direction = 'vertical';\n\t\t\t\t\t\treturn; // 如果是纵向滑动，不处理\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 如果是横向滑动\n\t\t\t\tif (this.direction === 'horizontal') {\n\t\t\t\t\t// 设置移动标志\n\t\t\t\t\tthis.isMoving = true;\n\t\t\t\t\t\n\t\t\t\t\t// 计算偏移量，只允许左滑（负值）\n\t\t\t\t\tlet offset = deltaX;\n\t\t\t\t\t\n\t\t\t\t\t// 如果是右滑并且没有打开的删除按钮，直接忽略\n\t\t\t\t\tif (deltaX > 0 && !(this.cartInfo.items[index].offset < 0)) {\n\t\t\t\t\t\toffset = 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 限制最大左滑距离，增加2px以匹配删除按钮右偏移\n\t\t\t\t\tif (offset < -72) { // 70px + 2px\n\t\t\t\t\t\toffset = -72;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 应用偏移量\n\t\t\t\t\tthis.$set(this.cartInfo.items[index], 'offset', offset);\n\t\t\t\t\t\n\t\t\t\t\t// 阻止滚动\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\ttouchEnd(e, index) {\n\t\t\t\tif (this.activeIndex !== index || !this.isMoving) return;\n\t\t\t\t\n\t\t\t\tconst item = this.cartInfo.items[index];\n\t\t\t\tconst offset = item.offset || 0;\n\t\t\t\t\n\t\t\t\t// 降低左滑触发阈值\n\t\t\t\tif (offset < -20) {\n\t\t\t\t\t// 完全展开删除按钮，增加2px以匹配删除按钮右偏移\n\t\t\t\t\tthis.$set(item, 'offset', -72);\n\t\t\t\t} else {\n\t\t\t\t\t// 否则恢复原位\n\t\t\t\t\tthis.$set(item, 'offset', 0);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 重置移动状态\n\t\t\t\tthis.isMoving = false;\n\t\t\t},\n\t\t\t\n\t\t\t// 关闭所有滑动项\n\t\t\tcloseAllSwipe() {\n\t\t\t\tif (!this.cartInfo.items) return;\n\t\t\t\t\n\t\t\t\tthis.cartInfo.items.forEach((item, index) => {\n\t\t\t\t\tif (item.offset) {\n\t\t\t\t\t\tthis.$set(item, 'offset', 0);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 在删除商品或批量删除后重置滑动状态\n\t\t\tresetSwipeStatus() {\n\t\t\t\tthis.closeAllSwipe();\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.cart-container {\n\t\tmin-height: calc(100vh - 50px); /* 减去tabBar的高度 */\n\t\tbackground-color: #121212;\n\t}\n\t\n\t/* 空购物车样式 */\n\t.empty-cart {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\theight: 70vh; /* 减少高度，为tabBar留出空间 */\n\t}\n\t\n\t.empty-icon {\n\t\twidth: 200rpx;\n\t\theight: 200rpx;\n\t\tmargin-bottom: 30rpx;\n\t\topacity: 0.7;\n\t}\n\t\n\t.empty-text {\n\t\tfont-size: 30rpx;\n\t\tcolor: #888888;\n\t\tmargin-bottom: 40rpx;\n\t}\n\t\n\t.go-shopping-btn {\n\t\tmargin-top: 20rpx;\n\t}\n\t\n\t.go-shopping-btn button {\n\t\tbackground-color: #7b68ee;\n\t}\n\t\n\t/* 购物车内容样式 */\n\t.cart-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 30rpx;\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tbackground-color: #1a1a1a;\n\t\tz-index: 10;\n\t}\n\t\n\t.cart-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.edit-btn {\n\t\tfont-size: 28rpx;\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t/* 购物车列表 */\n\t.cart-list {\n\t\theight: calc(100vh - 200rpx); /* 减少高度，为tabBar和底部结算栏留出空间 */\n\t\tpadding: 20rpx;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t/* 库存警告 */\n\t.stock-warning {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 20rpx;\n\t\tbackground-color: rgba(255, 76, 76, 0.1);\n\t\tborder-radius: 10rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.warning-icon {\n\t\tmargin-right: 10rpx;\n\t}\n\t\n\t.warning-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #ff4c4c;\n\t}\n\t\n\t/* 购物车项目 */\n\t.cart-item-wrapper {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tmargin-bottom: 20rpx;\n\t\toverflow: hidden;\n\t\tborder-radius: 16rpx;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.cart-item-container {\n\t\twidth: 100%;\n\t\ttransition: transform 0.2s ease-out; /* 减少动画时间，减轻阻尼感 */\n\t\tposition: relative;\n\t\tz-index: 2;\n\t\tbackground-color: #1a1a1a;\n\t\tborder-radius: 16rpx;\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\n\t\tbox-sizing: border-box;\n\t\toverflow: hidden; /* 确保内容不溢出 */\n\t\ttransform: translateX(0); /* 确保默认位置正确 */\n\t}\n\t\n\t.delete-button {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: -2px; /* 向右偏移2px，确保完全隐藏 */\n\t\twidth: 70px; /* 改为px单位，确保与JS中的值匹配 */\n\t\theight: 100%;\n\t\tbackground-color: #ff4c4c;\n\t\tcolor: #ffffff;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tfont-size: 30rpx;\n\t\tfont-weight: bold;\n\t\tz-index: 1;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.cart-item {\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t\tbackground-color: #1a1a1a;\n\t\tdisplay: flex;\n\t\tpadding: 30rpx;\n\t\tborder-radius: 16rpx;\n\t\tposition: relative;\n\t\tborder-right: 1px solid #1a1a1a; /* 添加右边框，确保边缘严实 */\n\t}\n\t\n\t.out-of-stock {\n\t\topacity: 0.7;\n\t}\n\t\n\t/* 复选框 */\n\t.checkbox {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-right: 20rpx;\n\t}\n\t\n\t.checkbox-icon {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tborder-radius: 50%;\n\t\tborder: 2rpx solid #555555;\n\t\tposition: relative;\n\t}\n\t\n\t.checkbox-icon.checked {\n\t\tbackground-color: #7b68ee;\n\t\tborder-color: #7b68ee;\n\t}\n\t\n\t.checkbox-icon.checked::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tleft: 14rpx;\n\t\ttop: 8rpx;\n\t\twidth: 12rpx;\n\t\theight: 20rpx;\n\t\tborder: solid white;\n\t\tborder-width: 0 3rpx 3rpx 0;\n\t\ttransform: rotate(45deg);\n\t}\n\t\n\t/* 商品内容 */\n\t.item-content {\n\t\tdisplay: flex;\n\t\tflex: 1;\n\t}\n\t\n\t.item-image {\n\t\twidth: 160rpx;\n\t\theight: 160rpx;\n\t\tborder-radius: 10rpx;\n\t\tmargin-right: 20rpx;\n\t\tbackground-color: #2a2a2a;\n\t}\n\t\n\t.item-details {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t}\n\t\n\t.item-name {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t\tmargin-bottom: 10rpx;\n\t}\n\t\n\t.item-specs-container {\n\t\tmargin-bottom: 10rpx;\n\t}\n\t\n\t.specs-row {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-bottom: 6rpx;\n\t}\n\t\n\t.specs-label {\n\t\tfont-size: 24rpx;\n\t\tcolor: #888888;\n\t\tmargin-right: 10rpx;\n\t}\n\t\n\t.specs-value {\n\t\tfont-size: 24rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.stock-info {\n\t\tmargin-bottom: 10rpx;\n\t}\n\t\n\t.stock-warning {\n\t\tfont-size: 24rpx;\n\t\tcolor: #ff4c4c;\n\t}\n\t\n\t.price-quantity {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\t\n\t.item-price {\n\t\tfont-size: 30rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t/* 数量控制 */\n\t.quantity-control {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t\n\t.quantity-btn {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tline-height: 56rpx;\n\t\ttext-align: center;\n\t\tbackground-color: #2a2a2a;\n\t\tcolor: #ffffff;\n\t\tfont-size: 36rpx;\n\t\tborder-radius: 30rpx;\n\t}\n\t\n\t.quantity-input {\n\t\twidth: 80rpx;\n\t\ttext-align: center;\n\t\theight: 60rpx;\n\t\tline-height: 60rpx;\n\t\tbackground-color: transparent;\n\t\tcolor: #ffffff;\n\t\tfont-size: 28rpx;\n\t\tmargin: 0 10rpx;\n\t}\n\t\n\t/* 删除按钮 */\n\t.delete-btn {\n\t\tposition: absolute;\n\t\ttop: 20rpx;\n\t\tright: 20rpx;\n\t\twidth: 50rpx;\n\t\theight: 50rpx;\n\t\tborder-radius: 25rpx;\n\t\tbackground-color: rgba(255, 76, 76, 0.2);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t\n\t.delete-icon {\n\t\tcolor: #ff4c4c;\n\t\tfont-size: 32rpx;\n\t}\n\t\n\t/* 底部结算栏 */\n\t.cart-footer {\n\t\tposition: fixed;\n\t\tleft: 0;\n\t\t/* #ifdef H5 */\n\t\tbottom: 100rpx;\n\t\t/* #endif */\n\t\t\n\t\t/* #ifdef MP-WEIXIN */\n\t\tbottom: 0;\n\t\t/* #endif */\n\t\t\n\t\t/* #ifdef APP-PLUS */\n\t\tbottom: 0;\n\t\t/* #endif */\n\t\t\n\t\twidth: 100%;\n\t\theight: 100rpx;\n\t\tbackground-color: #1a1a1a;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 0 30rpx;\n\t\tbox-sizing: border-box;\n\t\tz-index: 999;\n\t}\n\t\n\t.select-all {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t\n\t.select-all-text {\n\t\tmargin-left: 20rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.footer-right {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t\n\t.price-info {\n\t\tmargin-right: 20rpx;\n\t}\n\t\n\t.total-price {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.price-value {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #7b68ee;\n\t}\n\t\n\t.checkout-btn {\n\t\theight: 70rpx;\n\t\tline-height: 70rpx;\n\t\tpadding: 0 40rpx;\n\t\tborder-radius: 35rpx;\n\t\tbackground-color: #7b68ee;\n\t\tcolor: #ffffff;\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t.checkout-btn.disabled {\n\t\tbackground-color: #444444;\n\t\tcolor: #aaaaaa;\n\t}\n\t\n\t.batch-delete-btn {\n\t\theight: 70rpx;\n\t\tline-height: 70rpx;\n\t\tpadding: 0 40rpx;\n\t\tborder-radius: 35rpx;\n\t\tbackground-color: #ff4c4c;\n\t\tcolor: #ffffff;\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t/* 移除旧的左滑相关样式 */\n\t.swipe-area,\n\t.swipe-move-box,\n\t.swipe-action-btn {\n\t\tdisplay: none;\n\t}\n</style> ","import MiniProgramPage from 'C:/Users/LXD/Desktop/奶茶点单系统/milktea-uniapp/pages/cart/cart.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","api","item","res"],"mappings":"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"}