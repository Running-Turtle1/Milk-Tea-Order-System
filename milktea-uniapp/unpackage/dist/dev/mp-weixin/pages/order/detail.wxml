<view class="detail-container"><view class="navbar"><view class="back-btn" bindtap="{{b}}"><image src="{{a}}" class="back-icon"></image></view><view class="title">订单详情</view><view class="navbar-right"></view></view><view wx:if="{{c}}" class="loading-box"><view class="loading-spinner"></view><text class="loading-text">加载中...</text></view><scroll-view wx:else scroll-y scroll-top="{{M}}" class="detail-scroll-view" enable-back-to-top enhanced="{{true}}" bounces="{{true}}" show-scrollbar="{{true}}" bindscroll="{{N}}"><view class="status-card"><view class="status-header"><text class="status-text">{{d}}</text><text class="order-id">订单号: {{e}}</text></view><view wx:if="{{f}}" class="status-timeline"><view class="{{['timeline-item', i && 'completed']}}"><view class="timeline-dot"></view><view class="timeline-info"><text class="timeline-title">订单已提交</text><text wx:if="{{g}}" class="timeline-time">{{h}}</text></view></view><view class="{{['timeline-line', j && 'completed']}}"></view><view class="{{['timeline-item', o && 'completed']}}"><view class="timeline-dot"></view><view class="timeline-info"><text class="timeline-title">支付成功</text><text wx:if="{{k}}" class="timeline-time">{{l}}</text><text wx:if="{{m}}" class="timeline-time">取餐号: {{n}}</text></view></view></view><view wx:else class="status-canceled"><text class="canceled-text">订单已取消</text><text wx:if="{{p}}" class="canceled-time">{{q}}</text><view wx:if="{{r}}" class="refund-info"><text class="refund-reason">退款原因: {{s}}</text><text wx:if="{{t}}" class="refund-time">退款时间: {{v}}</text></view></view></view><view wx:if="{{w}}" class="detail-section"><view class="section-title">取餐信息</view><view class="pickup-info"><view class="pickup-item"><text class="pickup-value">{{x}}</text></view><view class="pickup-note"><text>请凭取餐号到门店取餐</text></view></view></view><view class="detail-section"><view class="section-title">商品信息</view><view wx:for="{{y}}" wx:for-item="product" wx:key="m" class="product-item"><image class="product-image" src="{{product.a}}" mode="aspectFill"></image><view class="product-info"><view class="product-name">{{product.b}}</view><view wx:if="{{product.c}}" class="product-spec"><text wx:if="{{product.d}}">{{product.e}}</text><text wx:if="{{product.f}}"> / </text><text wx:if="{{product.g}}">{{product.h}}</text></view><view wx:if="{{product.i}}" class="product-ingredients"> 配料: <text wx:for="{{product.j}}" wx:for-item="ing" wx:key="c">{{ing.a}}{{ing.b}}</text></view></view><view class="product-price-qty"><view class="product-price">¥{{product.k}}</view><view class="product-qty">x{{product.l}}</view></view></view></view><view class="detail-section"><view class="section-title">订单金额</view><view class="price-list"><view class="price-item"><text class="price-label">商品总价</text><text class="price-value">¥{{z}}</text></view><view wx:if="{{A}}" class="price-item"><text class="price-label">优惠金额</text><text class="price-value discount">-¥{{B}}</text></view><view class="price-item total"><text class="price-label">实付金额</text><text class="price-value">¥{{C}}</text></view></view></view><view wx:if="{{D}}" class="detail-section"><view class="section-title">支付信息</view><view class="payment-info"><view class="payment-item"><text class="payment-label">支付方式</text><text class="payment-value">{{E}}</text></view><view wx:if="{{F}}" class="payment-item"><text class="payment-label">支付时间</text><text class="payment-value">{{G}}</text></view><view wx:if="{{H}}" class="payment-item"><text class="payment-label">交易单号</text><text class="payment-value">{{I}}</text></view></view></view><view wx:if="{{J}}" class="detail-actions"><button class="action-btn cancel-btn" bindtap="{{K}}">取消订单</button><button class="action-btn pay-btn" bindtap="{{L}}">去支付</button></view><view class="safe-area-inset-bottom"></view></scroll-view><view wx:if="{{O}}" class="payment-popup"><view class="popup-mask" bindtap="{{P}}"></view><view class="popup-content"><view class="popup-header"><text class="popup-title">订单支付</text><text class="popup-close" bindtap="{{Q}}">×</text></view><view class="popup-body"><view class="payment-amount-info"><view class="payment-amount">¥{{R}}</view><view class="payment-order-no">订单号: {{S}}</view></view><view class="payment-methods"><view class="{{['payment-method-item', V && 'active']}}" bindtap="{{W}}"><view class="payment-method-content"><view class="payment-icon payment-icon-wechat"><image src="{{T}}" mode="aspectFit" class="payment-icon-img"></image></view><text class="payment-name">微信支付</text></view><text wx:if="{{U}}" class="payment-select">✓</text></view><view class="{{['payment-method-item', Z && 'active']}}" bindtap="{{aa}}"><view class="payment-method-content"><view class="payment-icon payment-icon-alipay"><image src="{{X}}" mode="aspectFit" class="payment-icon-img"></image></view><text class="payment-name">支付宝</text></view><text wx:if="{{Y}}" class="payment-select">✓</text></view></view></view><view class="popup-footer"><button class="confirm-payment-btn" bindtap="{{ab}}">确认支付</button></view></view></view></view>