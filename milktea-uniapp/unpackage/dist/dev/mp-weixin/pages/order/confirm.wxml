<view class="confirm-container"><view wx:if="{{a}}" class="loading"><text>加载中...</text></view><scroll-view wx:else scroll-y class="confirm-content"><view class="product-section"><view class="section-title">已选商品</view><view class="product-list"><view wx:for="{{b}}" wx:for-item="item" wx:key="l" class="product-item"><image src="{{item.a}}" mode="aspectFill" class="product-image"></image><view class="product-info"><view class="product-top"><view class="product-name">{{item.b}}</view><view class="product-quantity">x{{item.c}}</view></view><view wx:if="{{item.d}}" class="product-options"><text wx:if="{{item.e}}">{{item.f}}</text><text wx:if="{{item.g}}">{{item.h}}</text><text wx:if="{{item.i}}">{{item.j}}</text></view><view class="product-price">¥{{item.k}}</view></view></view></view></view><view class="coupon-section" bindtap="{{f}}"><view class="section-title">优惠券</view><view class="coupon-right"><text wx:if="{{c}}" class="coupon-value"> 已选择：{{d}} -¥{{e}}</text><text wx:else class="no-coupon">未使用优惠券</text><text class="arrow">></text></view></view><view class="note-section"><view class="section-title">备注</view><input type="text" placeholder="有什么特殊要求可以告诉我们哦~" class="note-input" value="{{g}}" bindinput="{{h}}"/></view><view class="price-detail"><view class="price-row"><text class="price-label">商品金额</text><text class="price-value">¥{{i}}</text></view><view wx:if="{{j}}" class="price-row"><text class="price-label">优惠券{{k}}</text><text class="price-value discount">-¥{{l}}</text></view><view wx:if="{{m}}" class="price-row"><text class="price-label">优惠后金额</text><text class="price-value">¥{{n}}</text></view><view wx:if="{{o}}" class="price-row"><text class="price-label">会员折扣 ({{p}}折)</text><text class="price-value discount">-¥{{q}}</text></view><view class="price-row"><text class="price-label">实付金额</text><text class="price-value">¥{{r}}</text></view></view><view class="bottom-placeholder"></view></scroll-view><view class="checkout-bar"><view class="total-section"><text class="total-text">总价：</text><text class="total-price">¥{{s}}</text></view><button class="submit-btn" bindtap="{{t}}">提交订单</button></view><view wx:if="{{v}}" class="coupon-modal"><view class="coupon-modal-mask" bindtap="{{w}}"></view><view class="coupon-modal-container"><view class="coupon-modal-header"><text class="coupon-modal-title">选择优惠券</text><text class="coupon-modal-close" bindtap="{{x}}">×</text></view><view class="coupon-modal-content"><view wx:if="{{y}}" class="coupon-list"><view class="{{['coupon-card', A && 'selected']}}" bindtap="{{B}}"><view class="coupon-left"><text class="coupon-amount">不使用</text></view><view class="coupon-right"><text class="coupon-name">不使用优惠券</text><text class="coupon-desc">无需使用优惠券</text></view><view wx:if="{{z}}" class="coupon-select-icon"><text class="check-icon">✓</text></view></view><view wx:for="{{C}}" wx:for-item="coupon" wx:key="l" class="{{['coupon-card', coupon.m && 'selected', coupon.n && 'disabled']}}" bindtap="{{coupon.o}}"><view class="coupon-left"><text wx:if="{{coupon.a}}" class="coupon-amount">¥{{coupon.b}}</text><text wx:else class="coupon-amount">{{coupon.c}}折</text><text wx:if="{{coupon.d}}" class="{{['coupon-condition', coupon.f && 'condition-not-met']}}">满{{coupon.e}}可用</text></view><view class="coupon-right"><text class="coupon-name">{{coupon.g}}</text><text class="coupon-desc">{{coupon.h}}</text><text class="coupon-date">有效期至{{coupon.i}}</text></view><view wx:if="{{coupon.j}}" class="coupon-select-icon"><text class="check-icon">✓</text></view><view wx:if="{{coupon.k}}" class="coupon-disabled-mask"></view></view></view><view wx:else class="no-coupons"><text>暂无可用优惠券</text></view></view><view class="coupon-modal-footer"><button class="cancel-btn" bindtap="{{D}}">取消</button><button class="confirm-btn" bindtap="{{E}}">确定</button></view></view></view></view>